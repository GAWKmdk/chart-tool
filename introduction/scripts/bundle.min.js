!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){/**
	 * Chart Tool
	 * @author Jeremy Agius <jagius@globeandmail.com>
	 * @author Tom Cardoso <tcardoso@globeandmail.com>
	 * @author Michael Pereira <mpereira@globeandmail.com>
	 * @see {@link} for further information.
	 * @see {@link http://www.github.com/globeandmail/chart-tool|Chart Tool}
	 * @license MIT
	 */
!function(e){if(e.d3){var t=function(){function t(t,n){x.start(n),u=f.clearDrawn(u,n),n=f.clearObj(n),t=f.clearChart(t);var a=i(9);n.data.width=f.getBounding(t,"width"),n.dispatch=x;var r;f.svgTest(e)?r=a(t,n):f.generateThumb(t,n,p),u.push({id:n.id,chartObj:r}),n.chartObj=r,d3.select(t).on("click",function(){x.click(this,r)}).on("mouseover",function(){x.mouseOver(this,r)}).on("mousemove",function(){x.mouseMove(this,r)}).on("mouseout",function(){x.mouseOut(this,r)}),x.finish(r)}function n(e){for(var t=0;t<l.length;t++)if(l[t].id===e)return l[t]}function a(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);return t}function r(e,i){var n="."+p.baseClass()+"[data-chartid="+p.prefix+e+"]";t(n,{id:e,data:i})}function s(e){for(var t,i,n=0;n<l.length;n++)l[n].id===e&&(i=l[n]);t="."+p.baseClass()+"[data-chartid="+i.id+"]",f.clearDrawn(u,i),f.clearObj(i),f.clearChart(t)}function o(e){for(var i=a(e),r=0;r<i.length;r++){var s=n(i[r]),o="."+p.baseClass()+"[data-chartid="+i[r]+"]";t(o,s)}}function d(t){o(t);var i=f.debounce(o,t,p.debounce,e);d3.select(e).on("resize."+p.prefix+"debounce",i).on("resize."+p.prefix+"redraw",x.redraw(t))}var l=e.__charttool||[],c=e.__charttooldispatcher||[],u=[],p=i(1),f=i(4),x=d3.dispatch("start","finish","redraw","mouseOver","mouseMove","mouseOut","click");for(var h in c)if(c.hasOwnProperty(h)){if(!(d3.keys(x).indexOf(h)>-1))throw"Chart Tool does not offer a dispatcher of type '"+h+"'. For available dispatcher types, please see the ChartTool.dispatch() method.";x.on(h,c[h])}return{init:function(){return d(l)},create:function(e,i){return t(e,i)},read:function(e){return n(e)},list:function(){return a(l)},update:function(e,t){return r(e,t)},destroy:function(e){return s(e)},dispatch:function(){return d3.keys(x)},wat:function(){console.info("ChartTool v"+p.version+" is a free, open-source chart generator and front-end library maintained by The Globe and Mail. For more information, check out our GitHub repo: www.github.com/globeandmail/chart-tool")},version:p.version,build:p.build,settings:i(1),charts:i(9),components:i(10),helpers:i(8),utils:i(4),line:i(15),area:i(19),multiline:i(18),stackedArea:i(20),column:i(21),stackedColumn:i(23),streamgraph:i(24),bar:i(22)}}();e.Meteor||t.init()}else{var n=this.Meteor||{},a=n.isServer||void 0;a||console.error("Chart Tool: no D3 library detected.")}e.ChartTool=t}("undefined"!=typeof window?window:this)},function(e,t,i){var n={version:i(2).version,build:i(2).buildver},a=i(3);e.exports={CUSTOM:a.CUSTOM,version:n.version,build:n.build,id:"",data:"",dateFormat:a.dateFormat,timeFormat:a.timeFormat,image:a.image,heading:"",qualifier:"",source:"",deck:"",index:"",hasHours:!1,social:a.social,seriesHighlight:function(){return this.data.seriesAmount&&this.data.seriesAmount<=1?1:0},baseClass:function(){return this.prefix+"chart"},customClass:"",options:{type:"line",interpolation:"linear",stacked:!1,expanded:!1,head:!0,deck:!1,qualifier:!0,legend:!0,footer:!0,x_axis:!0,y_axis:!0,tips:!1,annotations:!1,range:!1,series:!1,share_data:!0,social:!0},range:{},series:{},xAxis:a.xAxis,yAxis:a.yAxis,exportable:!1,editable:!1,prefix:a.prefix,debounce:a.debounce,tipTimeout:a.tipTimeout,monthsAbr:a.monthsAbr,dimensions:{width:0,computedWidth:function(){return this.width-this.margin.left-this.margin.right},height:function(){var e=d3.scale.linear().range([300,900]).domain([this.width*this.ratioMobile,this.width*this.ratioDesktop]);return Math.round(e(this.width))},computedHeight:function(){return this.height()-this.headerHeight-this.footerHeight-this.margin.top-this.margin.bottom},ratioMobile:a.ratioMobile,ratioDesktop:a.ratioDesktop,margin:a.margin,tipPadding:a.tipPadding,tipOffset:a.tipOffset,headerHeight:0,footerHeight:0,xAxisHeight:0,yAxisHeight:function(){return this.computedHeight()-this.xAxisHeight},xAxisWidth:0,labelWidth:0,yAxisPaddingRight:a.yAxis.paddingRight,tickWidth:function(){return this.computedWidth()-(this.labelWidth+this.yAxisPaddingRight)},barHeight:a.barHeight,bands:{padding:a.bands.padding,offset:a.bands.offset,outerPadding:a.bands.outerPadding}}}},function(e,t){e.exports={name:"chart-tool",version:"1.1.0",buildVer:"0",description:"A responsive charting application",main:"gulpfile.js",dependencies:{},devDependencies:{"browser-sync":"^2.8.0",gulp:"^3.8.11","gulp-clean":"^0.3.1","gulp-json-editor":"^2.2.1","gulp-minify-css":"^1.2.0","gulp-rename":"^1.2.2","gulp-replace":"^0.5.3","gulp-sass":"^2.0.4","gulp-shell":"^0.4.2","gulp-sourcemaps":"^1.5.2","gulp-util":"^3.0.6",jsdoc:"^3.3.2","json-loader":"^0.5.3","run-sequence":"^1.1.4",webpack:"^1.12.14","webpack-stream":"^3.1.0",yargs:"^3.15.0"},scripts:{test:""},keywords:["charts","d3","d3js","meteor","gulp","webpack","data visualization","chart","mongo"],repository:{type:"git",url:"git@github.com:globeandmail/chart-tool.git"},contributors:[{author:"Tom Cardoso",email:"tcardoso@globeandmail.com"},{author:"Jeremy Agius",email:"jagius@globeandmail.com"},{author:"Michael Pereira",email:"mpereira@globeandmail.com"}],license:"MIT"}},function(e,t){e.exports={CUSTOM:!1,prefix:"ct-",monthsAbr:["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec.","Jan."],debounce:500,tipTimeout:5e3,ratioMobile:1.15,ratioDesktop:.65,dateFormat:"%Y-%m-%d",timeFormat:"%H:%M",margin:{top:10,right:3,bottom:0,left:0},tipOffset:{vertical:4,horizontal:1},tipPadding:{top:4,right:9,bottom:4,left:9},yAxis:{display:!0,scale:"linear",ticks:"auto",orient:"right",format:"comma",prefix:"",suffix:"",min:"",max:"",rescale:!1,nice:!0,paddingRight:9,tickLowerBound:3,tickUpperBound:8,tickGoal:5,widthThreshold:420,dy:"",textX:0,textY:""},xAxis:{display:!0,scale:"time",ticks:"auto",orient:"bottom",format:"auto",prefix:"",suffix:"",min:"",max:"",rescale:!1,nice:!1,rangePoints:1,tickTarget:6,ticksSmall:4,widthThreshold:420,dy:.7,barOffset:9,upper:{tickHeight:7,textX:6,textY:7},lower:{tickHeight:12,textX:6,textY:2}},barHeight:30,bands:{padding:.06,offset:.12,outerPadding:.03},source:{prefix:"CHART TOOL",suffix:" Â» SOURCE:"},social:{facebook:{label:"Facebook",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-social-facebook.svg",redirect:"",appID:""},twitter:{label:"Twitter",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-social-twitter.svg",via:"",hashtag:""},email:{label:"Email",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-mail.svg"},sms:{label:"SMS",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-telephone.svg"}},image:{enable:!1,base_path:"",expiration:3e4,filename:"thumbnail",extension:"png",thumbnailWidth:460}}},function(e,t,i){function n(e,t,i,n){var a=-1;return function(){a>-1&&n.clearTimeout(a),a=n.setTimeout(function(){e(t)},i)}}function a(e){for(var t=document.querySelector(e);t&&t.querySelectorAll("svg").length;){var i=t.querySelectorAll("svg");i[i.length-1].parentNode.removeChild(i[i.length-1])}for(;t&&t.querySelectorAll("div").length;){var n=t.querySelectorAll("div");n[n.length-1].parentNode.removeChild(n[n.length-1])}return e}function r(e){return e.chartObj&&(e.chartObj=void 0),e}function s(e,t){if(e.length)for(var i=e.length-1;i>=0;i--)e[i].id===t.id&&e.splice(i,1);return e}function o(e,t){return document.querySelector(e).getBoundingClientRect()[t]}function d(){this.sec=1e3,this.min=60*this.sec,this.hour=60*this.min,this.day=24*this.hour,this.week=7*this.day,this.month=30*this.day,this.year=365*this.day}function l(e,t){e.each(function(){for(var e,i=d3.select(this),n=i.text().split(/\s+/).reverse(),a=[],r=0,s=1,o=0,d=i.attr("y"),l=parseFloat(i.attr("dy")),c=i.text(null).append("tspan").attr("x",o).attr("y",d).attr("dy",l+"em");e=n.pop();)a.push(e),c.text(a.join(" ")),c.node().getComputedTextLength()>t&&a.length>1&&(a.pop(),c.text(a.join(" ")),a=[e],c=i.append("tspan").attr("x",o).attr("y",d).attr("dy",++r*s+l+"em").text(e))})}function c(e,t,i){var n=t-e,a=new d;return n/a.year>i?"years":n/a.month>i?"months":n/a.week>i?"weeks":n/a.day>i?"days":n/a.hour>i?"hours":n/a.min>i?"minutes":"days"}function u(e){for(var t,i=e.length,n=e[0].key,a=e[i-1].key,r=[{type:"years",step:1},{type:"months",step:3},{type:"months",step:1},{type:"days",step:1},{type:"hours",step:1},{type:"minutes",step:1}],s=0;s<r.length;s++){var o=d3.time[r[s].type](n,a,r[s].step).length;if(o>=i-1){var t=o;break}}return t}function p(e){return d3.transform(d3.select(e).attr("transform")).translate}function f(e,t){return"translate("+e+", "+t+")"}function x(e){return!!e.document&&!!e.document.createElementNS&&!!e.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function h(e){var t=e.image;t.bucket=i(5);var n=e.id.replace(e.prefix,"");return"https://s3.amazonaws.com/"+t.bucket+"/"+t.base_path+n+"/"+t.filename+"."+t.extension}function m(e,t,i){var n=i.image,a=document.querySelector(e),r=a.querySelector("."+i.prefix+"base64img");if(n&&n.enable&&t.data.id){var s=document.createElement("img");s.setAttribute("src",h(t)),s.setAttribute("alt",t.data.heading),s.setAttribute("class",i.prefix+"thumbnail"),a.appendChild(s)}else r&&(r.style.display="block")}function g(e,t){var i=d3.csv.parseRows(t);e.append("table").selectAll("tr").data(i).enter().append("tr").selectAll("td").data(function(e){return e}).enter().append("td").text(function(e){return e})}e.exports={debounce:n,clearChart:a,clearObj:r,clearDrawn:s,getBounding:o,TimeObj:d,wrapText:l,timeDiff:c,timeInterval:u,getTranslateXY:p,translate:f,svgTest:x,getThumbnailPath:h,generateThumb:m,csvToTable:g,dataParse:i(6),factory:i(7)}},function(e,t,i){e.exports="chartprod"},function(e,t){function i(e,t,i){return"time"===e||"ordinal-time"===e?i||t:void 0}function n(e,t,i,n,a){var r,s,o={},d=d3.csv.parse(e,function(e,n){var a={};if(0===n&&(r=d3.keys(e)),t){var d=d3.time.format(t);a.key=d.parse(d3.values(e)[0])}else a.key=d3.values(e)[0];a.series=[];for(var l=1;l<d3.keys(e).length;l++){var c=d3.keys(e)[l];0!==e[c]&&""!==e[c]||(e[c]="__undefined__"),i?(0!==n||o[c]||(o[c]=e[c]),s="0"===i?100*(e[c]/o[c]-1):e[c]/o[c]*i):s=e[c],a.series.push({val:s,key:c})}return a}),l=d[0].series.length;if(n){if("stream"===a)var c=d3.layout.stack().offset("silhouette");else var c=d3.layout.stack();var u=c(d3.range(l).map(function(e){return d.map(function(t){return{legend:r[e+1],x:t.key,y:Number(t.series[e].val),raw:t}})}))}return{csv:e,data:d,seriesAmount:l,keys:r,stackedData:u||void 0}}e.exports={inputDate:i,parse:n}},function(e,t,i){function n(e,t){var n=i(6),a=i(8),r=a.extend(e),s=t.data,o=s.chart;r.dispatch=t.dispatch,r.version=s.version||r.version,r.id=t.id||r.id,r.heading=s.heading||r.heading,r.qualifier=s.qualifier||r.qualifier,r.source=s.source||r.source,r.deck=s.deck||r.deck,r.customClass=o.class||r.customClass,r.xAxis=a.extend(r.xAxis,o.x_axis)||r.xAxis,r.yAxis=a.extend(r.yAxis,o.y_axis)||r.yAxis;var d=r.options,l=o.options;return d.type=o.options.type||d.type,d.interpolation=o.options.interpolation||d.interpolation,d.social=!a.isUndefined(l.social)==!0?l.social:d.social,d.share_data=!a.isUndefined(l.share_data)==!0?l.share_data:d.share_data,d.stacked=!a.isUndefined(l.stacked)==!0?l.stacked:d.stacked,d.expanded=!a.isUndefined(l.expanded)==!0?l.expanded:d.expanded,d.head=!a.isUndefined(l.head)==!0?l.head:d.head,d.deck=!a.isUndefined(l.deck)==!0?l.deck:d.deck,d.legend=!a.isUndefined(l.legend)==!0?l.legend:d.legend,d.qualifier=!a.isUndefined(l.qualifier)==!0?l.qualifier:d.qualifier,d.footer=!a.isUndefined(l.footer)==!0?l.footer:d.footer,d.x_axis=!a.isUndefined(l.x_axis)==!0?l.x_axis:d.x_axis,d.y_axis=!a.isUndefined(l.y_axis)==!0?l.y_axis:d.y_axis,d.tips=!a.isUndefined(l.tips)==!0?l.tips:d.tips,d.annotations=!a.isUndefined(l.annotations)==!0?l.annotations:d.annotations,d.range=!a.isUndefined(l.range)==!0?l.range:d.range,d.series=!a.isUndefined(l.series)==!0?l.series:d.series,d.index=!a.isUndefined(l.indexed)==!0?l.indexed:d.index,r.baseClass=s.baseClass||r.baseClass,r.dimensions.width=s.width||r.dimensions.width,r.prefix=o.prefix||r.prefix,r.exportable=o.exportable||r.exportable,r.editable=o.editable||r.editable,r.exportable&&(r.dimensions.width=o.exportable.width||s.width||r.dimensions.width,r.dimensions.height=function(){return o.exportable.height},r.dimensions.margin=o.exportable.margin||r.dimensions.margin),o.hasHours&&(r.dateFormat+=" "+r.timeFormat),r.hasHours=o.hasHours||r.hasHours,r.dateFormat=o.dateFormat||r.dateFormat,r.dateFormat=n.inputDate(r.xAxis.scale,r.dateFormat,o.date_format),r.data=n.parse(o.data,r.dateFormat,d.index,d.stacked,d.type)||r.data,r}e.exports=n},function(e,t){function n(e){return e%1===0}function a(e){return e===+e&&e!==(0|e)}function r(e){if(e.constructor==Object){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return e.constructor==Array?!e.length:!e}function s(e){return void 0===e}function o(e,t){var i,n,a,r={},s={},o=[];for(i=0,n=e.length;n>i;i++)r[e[i]]=!0;for(i=0,n=t.length;n>i;i++)s[t[i]]=!0;for(a in r)a in s||o.push(a);for(a in s)a in r||o.push(a);return o}function d(e,t){var n=[];for(i in e)t.indexOf(e[i])>-1&&n.push(e[i]);return n}function l(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var i in e)t[i]="undefined"==typeof t[i]?l(e[i],null):t[i];return t}function c(e,t){return o(d3.keys(e),d3.keys(t))}function u(e,t){return d(d3.keys(e),d3.keys(t))}function p(e){return void 0===e?"":e}e.exports={isInteger:n,isFloat:a,isEmpty:r,isUndefined:s,extend:l,arrayDiff:o,arraySame:d,uniqueKeys:c,sameKeys:u,cleanStr:p}},function(e,t,i){function n(e,t){var n=i(7),a=i(1),r=i(10),s=new n(a,t),o=s.rendered={};s.options.head&&(o.header=r.header(e,s)),s.options.footer&&(o.footer=r.footer(e,s));var d=r.base(e,s);if(o.container=d,o.plot=r.plot(d,s),s.options.qualifier&&(o.qualifier=r.qualifier(d,s)),s.options.tips&&(o.tips=r.tips(d,s)),s.editable||s.exportable||(s.options.share_data&&(o.shareData=r.shareData(e,s)),s.options.social&&(o.social=r.social(e,s))),s.CUSTOM){var l=i(29);o.custom=l(d,s,o)}return s}e.exports=n},function(e,t,i){var n={base:i(11),header:i(12),footer:i(13),plot:i(14),qualifier:i(25),axis:i(16),scale:i(17),tips:i(26),social:i(27),shareData:i(28)};e.exports=n},function(e,t){function i(e,t){var i=t.dimensions.margin,n=d3.select(e).insert("svg","."+t.prefix+"chart_source").attr({"class":t.baseClass()+"_svg "+t.prefix+t.customClass+" "+t.prefix+"type_"+t.options.type+" "+t.prefix+"series-"+t.data.seriesAmount,width:t.dimensions.computedWidth()+i.left+i.right,height:t.dimensions.computedHeight()+i.top+i.bottom,version:1.1,xmlns:"http://www.w3.org/2000/svg"});n.append("rect").attr({"class":t.prefix+"bg",x:0,y:0,width:t.dimensions.computedWidth(),height:t.dimensions.computedHeight(),transform:"translate("+i.left+","+i.top+")"});var a=n.append("g").attr({"class":t.prefix+"graph",transform:"translate("+i.left+","+i.top+")"});return a}e.exports=i},function(e,t,i){function n(e,t){var n=i(8),a=d3.select(e).append("div").classed(t.prefix+"chart_title "+t.prefix+t.customClass,!0);if(t.exportable&&a.style("width",t.exportable.width+"px"),""!==t.heading||t.editable){var r=a.append("div").attr("class",t.prefix+"chart_title-text").text(t.heading);t.editable&&r.attr("contentEditable",!0).classed("editable-chart_title",!0)}var s;if("bar"===t.options.type&&(s=a.append("div").attr({"class":function(){var e=t.prefix+"chart_qualifier "+t.prefix+"chart_qualifier-bar";return t.editable&&(e+=" editable-chart_qualifier"),e},contentEditable:function(){return!!t.editable}}).text(t.qualifier)),t.data.keys.length>2){var o=a.append("div").classed(t.prefix+"chart_legend",!0),d=n.extend(t.data.keys);d.shift(),"multiline"===t.options.type&&(d=[d[0],d[1]],o.classed(t.prefix+"chart_legend-"+t.options.type,!0));var l=o.selectAll("div."+t.prefix+"legend_item").data(d).enter().append("div").attr("class",function(e,i){return t.prefix+"legend_item "+t.prefix+"legend_item_"+i});l.append("span").attr("class",t.prefix+"legend_item_icon"),l.append("span").attr("class",t.prefix+"legend_item_text").text(function(e){return e})}return t.dimensions.headerHeight=a.node().getBoundingClientRect().height,{headerGroup:a,legend:o,qualifier:s}}e.exports=n},function(e,t){function i(e,t){var i;if(""!==t.source||t.editable){i=d3.select(e).append("div").classed(t.prefix+"chart_source",!0),t.exportable&&i.style("width",t.exportable.width+"px");var n=i.append("div").attr("class",t.prefix+"chart_source-text").text(t.source);t.editable&&n.attr("contentEditable",!0).classed("editable-chart_source",!0),t.dimensions.footerHeight=i.node().getBoundingClientRect().height}return{footerGroup:i}}e.exports=i},function(e,t,i){function n(e,t){var n,a={line:i(15),multiline:i(18),area:i(19),stackedArea:i(20),column:i(21),bar:i(22),stackedColumn:i(23),streamgraph:i(24)};switch(t.options.type){case"line":n=a.line(e,t);break;case"multiline":n=a.multiline(e,t);break;case"area":n=t.options.stacked?a.stackedArea(e,t):a.area(e,t);break;case"bar":n=a.bar(e,t);break;case"column":n=t.options.stacked?a.stackedColumn(e,t):a.column(e,t);break;case"stream":n=a.streamgraph(e,t);break;default:n=a.line(e,t)}return n}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");n.axisCleanup(e,t,u,p),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),g=f.append("path").datum(t.data.data).attr({d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+h;return e}});x.push(g)}var x=x.reverse(),v=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e},d:v}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:v,line:m}}e.exports=n},function(e,t,i){function n(e,t){var i=d3.svg.axis().scale(t).orient(e.orient);return i}function a(e,t,i,a){var r=t[a],d=new n(r,i),l=e.select("."+t.prefix+"axis-group."+t.prefix+a).node();null!==l&&d3.select(l).remove();var c=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+a);return"xAxis"===a?s(c,t,i,d,a):"yAxis"===a&&o(c,t,i,d,a),{node:c,axis:d}}function r(e){switch(e){case"years":return d3.time.format("%Y");case"months":return d3.time.format("%b");case"weeks":return d3.time.format("%W");case"days":return d3.time.format("%j");case"hours":return d3.time.format("%H");case"minutes":return d3.time.format("%M")}}function s(e,t,n,a,r){var s,o=t[r];if(t.exportable&&t.exportable.x_axis){var d=i(8).extend;s=d(o,t.exportable.x_axis)}else s=o;e.attr("transform","translate(0,"+t.dimensions.yAxisHeight()+")");var p=e.append("g").attr("class",t.prefix+"x-axis");switch(o.scale){case"time":l(p,t,n,a,s);break;case"ordinal":c(p,n,a,s,t.dimensions);break;case"ordinal-time":u(p,t,n,a,s)}t.dimensions.xAxisHeight=p.node().getBBox().height}function o(e,t,i,n,a){e.attr("transform","translate(0,0)");var r=e.append("g").attr("class",t.prefix+"y-axis");d(t,n,r)}function d(e,t,n){var a,r=e.yAxis;if(e.exportable&&e.exportable.y_axis){var s=i(8).extend;a=s(r,e.exportable.y_axis)}else a=r;e.dimensions.yAxisPaddingRight=a.paddingRight,t.scale().range([e.dimensions.yAxisHeight(),0]),t.tickValues(A(t.scale(),r.ticks,a)),n.call(t),n.selectAll("g").filter(function(e){return e}).classed(e.prefix+"minor",!0),n.selectAll(".tick text").attr("transform","translate(0,0)").call(h,n,e,t,r).call(m,e.dimensions,r.textX),n.selectAll(".tick line").attr({x1:e.dimensions.labelWidth+e.dimensions.yAxisPaddingRight,x2:e.dimensions.computedWidth()})}function l(e,t,n,a,s){var o=i(4).timeDiff,d=n.domain(),l=o(d[0],d[1],3),c=r(l);a.tickFormat(c);var u,f;f="auto"===s.ticks?s.tickTarget:s.ticks,u=t.dimensions.tickWidth()>s.widthThreshold?k(d,l,f):k(d,l,s.ticksSmall),"column"!==t.options.type?a.tickValues(u):a.ticks(),e.call(a),e.selectAll("text").attr({x:s.upper.textX,y:s.upper.textY,dy:s.dy+"em"}).style("text-anchor","start").call(p,l,s.ems,t.monthsAbr),"column"===t.options.type&&y(e,l),e.selectAll(".tick").call(v),e.selectAll("line").attr("y2",s.upper.tickHeight)}function c(e,t,n,a,r){var s=i(4).wrapText;n.tickPadding(0),t.rangeExtent([0,r.tickWidth()]),t.rangeRoundBands([0,r.tickWidth()],r.bands.padding,r.bands.outerPadding);var o=t.rangeBand();e.call(n),e.selectAll("text").style("text-anchor","middle").attr("dy",a.dy+"em").call(s,o);var d=-1*d3.transform(e.select(".tick").attr("transform")).translate[0],l=-(o/2)-o*r.bands.outerPadding;e.selectAll("line").attr({x1:l,x2:l}),e.select("line").attr({x1:d,x2:d}),e.selectAll("line").attr("y2",a.upper.tickHeight);var c=e.append("g").attr({"class":"tick",transform:"translate("+(r.tickWidth()+o/2+o*r.bands.outerPadding)+",0)"});c.append("line").attr({y2:a.upper.tickHeight,x1:l,x2:l})}function u(e,t,n,a,s){var o=i(4).timeDiff,d=n.domain(),l=o(d[0],d[d.length-1],3),c=r(l);if(a.tickFormat(c),e.call(a),e.selectAll("text").attr({x:s.upper.textX,y:s.upper.textY,dy:s.dy+"em"}).style("text-anchor","start").call(p,l,s.ems,t.monthsAbr),t.dimensions.computedWidth()>t.xAxis.widthThreshold)var u=7;else var u=4;e.selectAll(".tick").call(w,e,l,n,u),e.selectAll("line").attr("y2",s.upper.tickHeight)}function p(e,t,i,n){var a,r,s,o,d,l,c,u;e.text(function(e){var p,f=d3.select(this);switch(t){case"years":p=e.getFullYear();break;case"months":d=n[e.getMonth()],o=e.getFullYear(),o!==a&&g(f,o,i),p=d,a=o;break;case"weeks":case"days":o=e.getFullYear(),d=n[e.getMonth()],l=e.getDate(),p=d!==r?d+" "+l:l,o!==a&&g(f,o,i),r=d,a=o;break;case"hours":d=n[e.getMonth()],l=e.getDate(),c=e.getHours(),u=e.getMinutes();var x,h,m=c>=12?"p.m.":"a.m.";if(x=0===c?12:c>12?c-12:c,h=0===u?"":10>u?":0"+u:":"+u,p=x+h+" "+m,l!==s){var v=d+" "+l;g(f,v,i)}s=l;break;default:p=e}return p})}function f(e,t,n){var a,r=i(8).isFloat;switch(e){case"general":a=d3.format("g")(t);break;case"si":var s=d3.formatPrefix(n),e=d3.format(".1f");a=e(s.scale(t))+s.symbol;break;case"comma":a=r(parseFloat(t))?d3.format(",.2f")(t):d3.format(",g")(t);break;case"round1":a=d3.format(",.1f")(t);break;case"round2":a=d3.format(",.2f")(t);break;case"round3":a=d3.format(",.3f")(t);break;case"round4":a=d3.format(",.4f")(t);break;default:a=d3.format(",g")(t)}return a}function x(e,t,i,n,a){var r=n.tickValues()[n.tickValues().length-1];e.text(function(e,t){var i=f(a.format,e,r);return t===n.tickValues().length-1&&(i=(a.prefix||"")+i+(a.suffix||"")),i})}function h(e,t,i,n,a){var r=[],s=n.tickValues()[n.tickValues().length-1];e.attr("transform","translate(0,0)").text(function(e,t){var i=f(a.format,e,s);return t===n.tickValues().length-1&&(i=(a.prefix||"")+i+(a.suffix||"")),i}).text(function(){var e=d3.select(this),t=e.node().getBoundingClientRect().width;return r.push(t),e.text()}).attr({dy:function(){return""!==a.dy?a.dy+"em":d3.select(this).attr("dy")},x:function(){return""!==a.textX?a.textX:d3.select(this).attr("x")},y:function(){return""!==a.textY?a.textY:d3.select(this).attr("y")}}),i.dimensions.labelWidth=d3.max(r)}function m(e,t,i){e.attr({transform:"translate("+(t.labelWidth-i)+",0)",x:0})}function g(e,t,i){var n=e.property("nodeName"),a=d3.select(e.node().parentNode),r=i||1.6,s=parseFloat(e.attr("dy")),o=parseFloat(e.attr("x")),d=a.append(n).attr("dy",r+s+"em").attr("x",o).text(function(){return t});return d}function v(e,t){for(var t=t||{},i=t.tolerance||0,n=t.from||0,a=t.to||e[0].length,r=n;a>r;r++){var s=e[0][r],o=e[0][r+1];if(s&&o&&s.getBoundingClientRect&&o.getBoundingClientRect)for(;s.getBoundingClientRect().right+i>o.getBoundingClientRect().left&&(d3.select(o).data()[0]===e.data()[a]?d3.select(s).remove():d3.select(o).remove(),r++,o=e[0][r+1]););}}function y(e,t){var i,n,a,r,s,o,d,l,c,u,p=e.selectAll(".tick");p.each(function(e){switch(t){case"years":o=e.getFullYear(),o===i&&d3.select(this).remove(),i=o;break;case"months":o=e.getFullYear(),d=e.getMonth(),d===n&&o===i&&d3.select(this).remove(),n=d,i=o;break;case"weeks":case"days":o=e.getFullYear(),d=e.getMonth(),l=e.getDate(),l===a&&d===n&&o===i&&d3.select(this).remove(),a=l,n=d,i=o;break;case"hours":l=e.getDate(),c=e.getHours(),u=e.getMinutes(),l===a&&c===r&&u===s&&d3.select(this).remove(),a=l,r=c,s=u}})}function b(e,t){var i=e.node().getBBox().width,n=e.selectAll(".tick")[0];if(n.length){var a=d3.transform(d3.select(n[0]).attr("transform")).translate[0];if(i+a>=t){var r=n[n.length-1];d3.select(r).attr("class","last-tick-hide"),i=e.node().getBBox().width,n=e.selectAll(".tick")[0]}}}function k(e,t,i){for(var n,a=e[0],r=e[1],s=1,o=12,d=[],l=s;o>=l;l++){var c={};c.interval=l,c.arr=d3.time[t](a,r,l).length,d.push(c)}d.length>1?n=d.reduce(function(e,t){return Math.abs(t.arr-i)<Math.abs(e.arr-i)?t:e}):1===d.length?n=d[0]:n.interval=1;var u=d3.time[t](a,r,n.interval),p=u[0]-a,f=u[1]-u[0];return p>f/2&&u.unshift(a),u}function A(e,t,i){var n=e.domain()[0],a=e.domain()[1];if("auto"!==t)return e.ticks(t);for(var r,s=i.tickLowerBound,o=i.tickUpperBound,d=i.tickGoal,l=[],c=[],u=s;o>=u;u++){var p=e.ticks(u);0>n?p[0]===n&&p[p.length-1]===a&&l.push(p):p[p.length-1]===a&&l.push(p)}l.forEach(function(e){c.push(e.length)});var r;return r=c.length>1?c.reduce(function(e,t){return Math.abs(t-d)<Math.abs(e-d)?t:e}):1===c.length?c[0]:null,e.ticks(r)}function w(e,t,i,n,a){y(t,i);var r=t.selectAll(".tick");if("years"!==i){var s,o,d,l,c,u,p=[];r.each(function(e){var t=d3.select(this);switch(i){case"months":l=e.getFullYear(),l!==s&&p.push(t),s=e.getFullYear();break;case"weeks":case"days":l=e.getFullYear(),c=e.getMonth(),c!==o&&l!==s?p.push(t):c!==o?p.push(t):l!==s&&p.push(t),o=e.getMonth(),s=e.getFullYear();break;case"hours":u=e.getDate(),u!==d&&p.push(t),d=u}});var f,x;if(p.length>1)for(var h=0;h<p.length+1;h++)0===h?(f=0,x=r.data().indexOf(p[0].data()[0])):h===p.length?(f=r.data().indexOf(p[h-1].data()[0]),x=r.length-1):(f=r.data().indexOf(p[h-1].data()[0]),x=r.data().indexOf(p[h].data()[0])),x-f&&v(r,{from:f,to:x,tolerance:a})}else v(r,{tolerance:a})}function _(e,t,n,r){d(t,r.axis,r.node);var s=i(17).setRangeType,o=i(17).setRangeArgs,l={rangeType:s(t.xAxis),range:n.range||[0,t.dimensions.tickWidth()],bands:t.dimensions.bands,rangePoints:t.xAxis.rangePoints};o(n.axis.scale(),l);var c=t.dimensions.xAxisHeight;n=a(e,t,n.axis.scale(),"xAxis"),n.node.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")"),"ordinal"!==t.xAxis.scale&&b(n.node,t.dimensions.tickWidth()),c!==t.dimensions.xAxisHeight&&d(t,r.axis,r.node)}function O(e,t,i,n){var a=i.axis.tickValues(),r=a[0],s=a[a.length-1];if(0>=r&&s>=0){var o=i.node.selectAll(".tick:not(."+e.prefix+"minor)"),d=o.select("line"),l=t.append("line").style("shape-rendering","crispEdges").attr("class",e.prefix+"zero-line"),c=[0,0];c[0]+=d3.transform(t.select("."+e.prefix+n).attr("transform")).translate[0],c[1]+=d3.transform(t.select("."+e.prefix+n).attr("transform")).translate[1],c[0]+=d3.transform(o.attr("transform")).translate[0],c[1]+=d3.transform(o.attr("transform")).translate[1],"xAxis"===n?l.attr({y1:d.attr("y1"),y2:d.attr("y2"),x1:0,x2:0,transform:"translate("+c[0]+","+c[1]+")"}):"yAxis"===n&&l.attr({x1:d.attr("x1"),x2:d.attr("x2"),y1:0,y2:0,transform:"translate("+c[0]+","+c[1]+")"}),d.style("display","none")}}e.exports={AxisFactory:n,axisManager:a,determineFormat:r,appendXAxis:s,appendYAxis:o,drawYAxis:d,timeAxis:l,discreteAxis:c,ordinalTimeAxis:u,setTickFormatX:p,setTickFormatY:f,updateTextX:x,updateTextY:h,repositionTextY:m,newTextNode:g,dropTicks:v,dropOversetTicks:b,dropRedundantTicks:y,tickFinderX:k,tickFinderY:A,axisCleanup:_,addZeroLine:O}},function(e,t,i){function n(e,t){var i=e[t],n=new a(e,i,t),s=r(n.type);return s.domain(n.domain),d(s,n),i.nice&&h(s,t,n),i.rescale&&f(s,t,i),{obj:n,scale:s}}function a(e,t,i){this.type=t.scale,this.domain=l(e,t),this.rangeType=s(t),this.range=o(e,i),this.bands=e.dimensions.bands,this.rangePoints=t.rangePoints||1}function r(e){var t;switch(e){case"time":t=d3.time.scale();break;case"ordinal":case"ordinal-time":t=d3.scale.ordinal();break;case"linear":t=d3.scale.linear();break;case"identity":t=d3.scale.identity();break;case"pow":t=d3.scale.pow();break;case"sqrt":t=d3.scale.sqrt();break;case"log":t=d3.scale.log();break;case"quantize":t=d3.scale.quantize();break;case"quantile":t=d3.scale.quantile();break;case"threshold":t=d3.scale.threshold();break;default:t=d3.scale.linear()}return t}function s(e){var t;switch(e.scale){case"time":case"linear":t="range";break;case"ordinal":case"discrete":t="rangeRoundBands";break;case"ordinal-time":t="rangePoints";break;default:t="range"}return t}function o(e,t){var i;return"xAxis"===t?i=[0,e.dimensions.tickWidth()]:"yAxis"===t&&(i=[e.dimensions.yAxisHeight(),0]),i}function d(e,t){switch(t.rangeType){case"range":return e[t.rangeType](t.range);case"rangeRoundBands":return e[t.rangeType](t.range,t.bands.padding,t.bands.outerPadding);case"rangePoints":return e[t.rangeType](t.range,t.rangePoints)}}function l(e,t){var i,n=e.data;switch(t.scale){case"time":i=c(n,t.min,t.max);break;case"linear":var a,r=e.options.type;"area"!==r&&"column"!==r&&"bar"!==r||(a=!0),i=u(n,t.min,t.max,e.options.stacked,a);break;case"ordinal":case"ordinal-time":i=p(n)}return i}function c(e,t,i){if(t&&i)var n=t,a=i;else var r=d3.extent(e.data,function(e){return e.key}),n=t||new Date(r[0]),a=i||new Date(r[1]);return[n,a]}function u(e,t,i,n,a){var r,s,o=[];return d3.map(e.data,function(e){for(var t=0;t<e.series.length;t++)o.push(Number(e.series[t].val))}),s=n?d3.max(e.stackedData[e.stackedData.length-1],function(e){return e.y0+e.y}):d3.max(o),r=d3.min(o),t?r=t:r>0&&(r=0),i?s=i:0>s&&a&&(s=0),[r,s]}function p(e){return e.data.map(function(e){return e.key})}function f(e,t,i){switch(i.scale){case"linear":i.max||x(e,i)}}function x(e,t){var i=e.ticks(10).slice(),n=Math.abs(i[i.length-1])-Math.abs(i[i.length-2]),a=i[i.length-1]+n;e.domain([e.domain()[0],a])}function h(e,t,n){switch(n.type){case"time":var a=i(4).timeDiff,r=a(e.domain()[0],e.domain()[1],3);m(e,r);break;case"linear":g(e)}}function m(e,t){var n=i(4).timeInterval,a=n(t);e.domain(e.domain()).nice(a)}function g(e){e.domain(e.domain()).nice()}e.exports={scaleManager:n,ScaleObj:a,setScaleType:r,setRangeType:s,setRangeArgs:d,setRange:o,setDomain:l,setDateDomain:c,setNumericalDomain:u,setDiscreteDomain:p,rescale:f,rescaleNumerical:x,niceify:h,niceifyTime:m,niceifyNumerical:g}},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),g=f.append("path").datum(t.data.data).attr({
d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"multiline "+t.prefix+"multiline-"+h;return e}});x.push(g)}var x=x.reverse(),v=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"multiline "+t.prefix+"multiline-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e},d:v}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:v,line:m}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y0(c(0)).y1(function(e){return c(e.series[h].val)}),g=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),v=f.append("path").datum(t.data.data).attr({d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"fill "+t.prefix+"fill-"+h;return e}});f.append("path").datum(t.data.data).attr({d:g,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+h;return e}}),x.push(v)}var x=x.reverse(),y=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y0(c(0)).y1(function(e){return c(e.series[t.seriesHighlight()].val)}),b=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({d:y,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"fill "+t.prefix+"fill-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e}}),f.append("path").datum(t.data.data).attr({d:b,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e}}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:b,hArea:y,line:g,area:m}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0}),e.classed(t.prefix+"stacked",!0);var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=f.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("svg:g").attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(e,i){var n=t.prefix+"series "+t.prefix+"series_"+i;return i===t.seriesHighlight()&&(n=t.prefix+"series "+t.prefix+"series_"+i+" "+t.prefix+"highlight"),n}}),h=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.y0+e.y)}).x(function(e){return l(e.x)}).y0(function(e){return c(e.y0)}).y1(function(e){return c(e.y0+e.y)}),m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.y0+e.y)}).x(function(e){return l(e.x)}).y(function(e){return c(e.y0+e.y)});return x.append("path").attr("class",function(e,i){var n=t.prefix+"fill "+t.prefix+"fill-"+i;return i===t.seriesHighlight()&&(n=t.prefix+"fill "+t.prefix+"fill-"+i+" "+t.prefix+"highlight"),n}).attr("d",h),x.append("path").attr("class",function(e,i){return t.prefix+"line "+t.prefix+"line-"+i}).attr("d",m),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,series:x,line:m,area:h}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");switch(n.axisCleanup(e,t,u,p),t.xAxis.scale){case"time":var f=i(4).timeInterval,x=f(t.data.data)+1,h=t.dimensions.tickWidth()/x/t.data.seriesAmount;u.range=[0,t.dimensions.tickWidth()-h*t.data.seriesAmount],n.axisCleanup(e,t,u,p);break;case"ordinal-time":var h=l(t.data.data[1].key)-l(t.data.data[0].key);e.select("."+t.prefix+"axis-group."+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2)+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")");break;case"ordinal":var h=l.rangeBand()/t.data.seriesAmount}for(var m=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform",function(){var e;return e="ordinal-time"===t.xAxis.scale?t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2:t.dimensions.computedWidth()-t.dimensions.tickWidth(),"translate("+e+",0)"}),g=0;g<t.data.seriesAmount;g++){var v=m.append("g").attr("class",t.prefix+"series_"+g),y=v.selectAll("."+t.prefix+"column").data(t.data.data).enter().append("g").attr({"class":t.prefix+"column "+t.prefix+"column-"+g,"data-series":g,"data-key":function(e){return e.key},"data-legend":function(){return t.data.keys[g+1]},transform:function(e){return"ordinal-time"!==t.xAxis.scale?"translate("+l(e.key)+",0)":void 0}});if(y.append("rect").attr({"class":function(e){return e.series[g].val<0?"negative":"positive"},x:function(e){return"ordinal-time"!==t.xAxis.scale?g*h:l(e.key)},y:function(e){return"__undefined__"!==e.series[g].val?c(Math.max(0,e.series[g].val)):void 0},height:function(e){return"__undefined__"!==e.series[g].val?Math.abs(c(e.series[g].val)-c(0)):void 0},width:function(){return"ordinal-time"!==t.xAxis.scale?h:h/t.data.seriesAmount}}),t.data.seriesAmount>1){var b=t.dimensions.bands.offset;y.selectAll("rect").attr({x:function(e){return"ordinal-time"!==t.xAxis.scale?g*h+h*(b/2):l(e.key)+g*(h/t.data.seriesAmount)},width:function(){return"ordinal-time"!==t.xAxis.scale?h-h*b:h/t.data.seriesAmount}})}}return n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:m,series:v,singleColumn:h,columnItem:y}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=a.scaleManager;t.data.data.reverse();var s;if(t.exportable&&t.exportable.x_axis){var o=i(8).extend;s=o(t.xAxis,t.exportable.x_axis)}else s=t.xAxis;var d=new r(t,"xAxis"),l=d.scale,c=d3.svg.axis().scale(l).orient("bottom"),u=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"),p=u.append("g").attr("class",t.prefix+"x-axis").call(c),f=[];p.selectAll("text").attr("y",s.barOffset).each(function(){f.push(d3.select(this).node().getBoundingClientRect().height)});var x=f.reduce(function(e,t){return e>t?e:t});t.dimensions.xAxisHeight=x+s.barOffset,p.selectAll("g").filter(function(e){return e}).classed(t.prefix+"minor",!0);var h=new r(t,"yAxis"),m=h.scale;if(!t.exportable||t.exportable&&!t.exportable.dynamicHeight){var g=t.dimensions.barHeight*t.data.data.length*t.data.seriesAmount;m.rangeRoundBands([g,0],t.dimensions.bands.padding,t.dimensions.bands.outerPadding),t.dimensions.yAxisHeight=g-g*t.dimensions.bands.outerPadding*2}var v=d3.svg.axis().scale(m).orient("left"),y=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+"yAxis").attr("transform","translate(0,0)"),b=y.append("g").attr("class",t.prefix+"y-axis").call(v);if(b.selectAll("line").remove(),b.selectAll("text").attr("x",0),t.dimensions.width>t.yAxis.widthThreshold)var k=t.dimensions.computedWidth()/3.5;else var k=t.dimensions.computedWidth()/3;if(b.node().getBBox().width>k){var A=i(4).wrapText;b.selectAll("text").call(A,k).each(function(){var e=d3.select(this).selectAll("tspan"),t=e[0].length,i=d3.select(this).node().getBBox().height;t>1&&e.attr({y:i/t/2-i/2})})}t.dimensions.labelWidth=b.node().getBBox().width,y.attr("transform","translate("+t.dimensions.labelWidth+",0)");var w=n.tickFinderY;if(t.xAxis.widthThreshold>t.dimensions.width)var _={tickLowerBound:3,tickUpperBound:8,tickGoal:6};else var _={tickLowerBound:3,tickUpperBound:8,tickGoal:4};var O=w(l,t.xAxis.ticks,_);l.range([0,t.dimensions.tickWidth()]),c.tickValues(O),p.call(c),p.selectAll(".tick text").attr("y",s.barOffset).call(n.updateTextX,p,t,c,t.xAxis),t.exportable&&t.exportable.dynamicHeight?u.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+t.dimensions.computedHeight()+")"):u.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+g+")");var W=d3.transform(u.attr("transform")).translate[0]+u.node().getBBox().width;W>t.dimensions.computedWidth()&&(l.range([0,t.dimensions.tickWidth()-(W-t.dimensions.computedWidth())]),p.call(c),p.selectAll(".tick text").attr("y",s.barOffset).call(n.updateTextX,p,t,c,t.xAxis));for(var j=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"),P=m.rangeBand()/t.data.seriesAmount,T=0;T<t.data.seriesAmount;T++){var C=j.append("g").attr("class",t.prefix+"series_"+T),R=C.selectAll("."+t.prefix+"bar").data(t.data.data).enter().append("g").attr({"class":t.prefix+"bar "+t.prefix+"bar-"+T,"data-series":T,"data-key":function(e){return e.key},"data-legend":function(){return t.data.keys[T+1]},transform:function(e){return"translate(0,"+m(e.key)+")"}});if(R.append("rect").attr({"class":function(e){return e.series[T].val<0?"negative":"positive"},x:function(e){return l(Math.min(0,e.series[T].val))},y:function(){return T*P},width:function(e){return Math.abs(l(e.series[T].val)-l(0))},height:function(e){return P}}),t.data.seriesAmount>1){var H=t.dimensions.bands.offset;R.selectAll("rect").attr({y:function(){return T*P+P*(H/2)},height:P-P*H})}}p.selectAll("g").filter(function(e){return e}).classed(t.prefix+"minor",!0),p.selectAll("line").attr({y1:function(){return t.exportable&&t.exportable.dynamicHeight?-(t.dimensions.computedHeight()-t.dimensions.xAxisHeight):-g},y2:0}),t.exportable&&t.exportable.dynamicHeight?u.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")"):(u.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+g+")"),t.dimensions.totalXAxisHeight=u.node().getBoundingClientRect().height,t.dimensions.computedHeight=function(){return this.totalXAxisHeight},d3.select(e.node().parentNode).attr("height",function(){var e=t.dimensions.margin;return t.dimensions.computedHeight()+e.top+e.bottom}),d3.select(e.node().parentNode).select("."+t.prefix+"bg").attr({height:t.dimensions.computedHeight()}));var S={node:u,axis:c},B={node:y,axis:v},n=i(16);return n.addZeroLine(t,e,S,"xAxis"),{xScaleObj:d,yScaleObj:h,xAxisObj:S,yAxisObj:B,seriesGroup:j,series:C,singleBar:P,barItem:R}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"yAxis"),d=new s(t,"xAxis"),l=o.scale,c=d.scale,u=new r(e,t,d.scale,"xAxis"),p=new r(e,t,o.scale,"yAxis");switch(n.axisCleanup(e,t,u,p),t.xAxis.scale){case"time":var f=i(4).timeInterval,x=f(t.data.data),h=t.dimensions.tickWidth()/x;u.range=[0,t.dimensions.tickWidth()-h],n.axisCleanup(e,t,u,p);break;case"ordinal-time":var h=c(t.data.data[1].key)-c(t.data.data[0].key);e.select("."+t.prefix+"axis-group."+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2)+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")");break;case"ordinal":var h=c.rangeBand()}var m=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform",function(){var e;return e="ordinal-time"===t.xAxis.scale?t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2:t.dimensions.computedWidth()-t.dimensions.tickWidth(),"translate("+e+",0)"}),g=m.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("g").attr("class",function(e,i){return t.prefix+"series "+t.prefix+"series_"+i}),v=g.selectAll("rect").data(function(e){return e}).enter().append("rect").attr({"class":t.prefix+"column","data-key":function(e){return e.x},"data-legend":function(e){return e.legend},x:function(e){return c(e.x)},y:function(e){return l(Math.max(0,e.y0+e.y))},height:function(e){return Math.abs(l(e.y)-l(0))},width:h});return n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:d,yScaleObj:o,xAxisObj:u,yAxisObj:p,seriesGroup:m,series:g,rect:v}}e.exports=n},function(e,t,i){function n(e,t){var n=i(16),a=i(17),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1);var f=e.append("g").attr({"class":t.prefix+"series_group",transform:function(){return"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"}}),x=f.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("g").attr("class",function(e,i){return t.prefix+"series "+t.prefix+"series_"+i}),h=d3.svg.area().interpolate(t.options.interpolation).x(function(e){return l(e.x)}).y0(function(e){return c(e.y0)}).y1(function(e){return c(e.y0+e.y)}),m=d3.svg.line().interpolate(t.options.interpolation).x(function(e){return l(e.x)}).y(function(e){return c(e.y0+e.y)});return x.append("path").attr("class",function(e,i){var n=t.prefix+"stream-series "+t.prefix+"stream-"+i;return i===t.seriesHighlight()&&(n=t.prefix+"stream-series "+t.prefix+"stream-"+i+" "+t.prefix+"highlight"),n}).attr("d",h),x.append("path").attr("class",function(){return t.prefix+"stream-series "+t.prefix+"line"}).attr("d",m),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,series:x,line:m,area:h}}e.exports=n},function(e,t){function i(e,t){if("bar"!==t.options.type){var i=e.select("."+t.prefix+"yAxis");if(t.editable){var n=i.append("foreignObject").attr({"class":t.prefix+"fo "+t.prefix+"qualifier",width:"100%"}),a=n.append("xhtml:div").attr("xmlns","http://www.w3.org/1999/xhtml"),r=a.append("div").attr({"class":t.prefix+"chart_qualifier editable-chart_qualifier",contentEditable:!0,xmlns:"http://www.w3.org/1999/xhtml"}).text(t.qualifier);n.attr({width:r.node().getBoundingClientRect().width+15,height:r.node().getBoundingClientRect().height,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+-r.node().getBoundingClientRect().height/2+")"})}else var s=i.append("text").attr("class",t.prefix+"chart_qualifier-text-bg").text(t.qualifier).attr({dy:"0.32em",y:"0",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+", 0)"}),o=i.append("text").attr("class",t.prefix+"chart_qualifier-text").text(t.qualifier).attr({dy:"0.32em",y:"0",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+", 0)"})}return{qualifierBg:s,qualifierText:o}}e.exports=i},function(e,t,i){function n(e,t,i,n){if(i){for(var a=[],r=d3.bisector(function(e){return e.x}).left,s=0;s<e.length;s++)a.push(r(e[s],t));return a}var r=d3.bisector(function(e){return e.key}).left;return r(e,t)}function a(e){return{x:d3.mouse(e.node())[0],y:d3.mouse(e.node())[1]}}function r(e,t){var i,a=e.rendered.plot.xScaleObj,r=a.scale,s=a.obj.type;if("ordinal-time"===s||"ordinal"===s){var o=d3.bisector(function(e){return e}).left,d=o(r.range(),t.x);i=r.domain()[d]}else i=r.invert(t.x);var l;if(e.options.stacked){for(var c,u=e.data.stackedData,p=n(u,i,e.options.stacked),f=[],x=0;x<u.length;x++)if(c)f.push(u[x][c]);else{var h=u[x][p[x]-1],m=u[x][p[x]];c=i-h.x>m.x-i?p[x]:p[x]-1,f.push(u[x][c])}l=f}else{var u=e.data.data,p=n(u,i),h=u[p-1],m=u[p];l=i-h.key>m.key-i?m:h}return l}function s(e,t){e.xTipLine&&e.xTipLine.classed(t.prefix+"active",!0),e.tipBox&&e.tipBox.classed(t.prefix+"active",!0),e.tipPathCircles&&e.tipPathCircles.classed(t.prefix+"active",!0)}function o(e,t){"column"===t.options.type&&(t.options.stacked?t.rendered.plot.series.selectAll("rect").classed(t.prefix+"muted",!1):t.rendered.plot.columnItem.selectAll("rect").classed(t.prefix+"muted",!1)),e.xTipLine&&e.xTipLine.classed(t.prefix+"active",!1),e.tipBox&&e.tipBox.classed(t.prefix+"active",!1),e.tipPathCircles&&e.tipPathCircles.classed(t.prefix+"active",!1)}function d(e,t){return setTimeout(function(){o(e,t)},t.tipTimeout)}function l(e,t){var i,n=c(e,t),a={line:p,multiline:p,area:t.options.stacked?x:f,column:t.options.stacked?g:m,stream:h};i="multiline"===t.options.type?[t.data.data[0].series[0]]:t.data.data[0].series;var r=u(e,t,n,i);switch(t.options.type){case"line":case"multiline":case"area":case"stream":n.overlay=n.tipNode.append("rect").attr({"class":t.prefix+"tip_overlay",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)",width:t.dimensions.tickWidth(),height:t.dimensions.computedHeight()}),n.overlay.on("mouseover",function(){s(n,t)}).on("mouseout",function(){o(n,t)}).on("mousemove",function(){return s(n,t),clearTimeout(y),y=d(n,t),a[t.options.type](n,r,t)});break;case"column":var l;l=t.options.stacked?t.rendered.plot.series.selectAll("rect"):t.rendered.plot.columnItem.selectAll("rect"),l.on("mouseover",function(e){s(n,t),clearTimeout(y),y=d(n,t),a.column(n,t,e,this)}).on("mouseout",function(e){o(n,t)})}}function c(e,t){var i=d3.select(e.node().parentNode),n=d3.select(e.node().parentNode.parentNode),a=i.append("g").attr({transform:"translate("+t.dimensions.margin.left+","+t.dimensions.margin.top+")","class":t.prefix+"tip"}).classed(t.prefix+"tip_stacked",function(){return!!t.options.stacked}),r=a.append("g").attr("class",t.prefix+"tip_line-x").classed(t.prefix+"active",!1);r.append("line");var s=a.append("g").attr({"class":t.prefix+"tip_box",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"}),o=s.append("rect").attr({"class":t.prefix+"tip_rect",transform:"translate(0,0)",width:1,height:1}),d=s.append("g").attr("class",t.prefix+"tip_group"),l=n.select("."+t.prefix+"legend_item_icon").node();if(l)var c=l.getBoundingClientRect().width/2;else var c=0;var u=a.append("g").attr("class",t.prefix+"tip_path-circle-group"),p=d.insert("g",":first-child").attr("class",t.prefix+"tip_text-date-group").append("text").attr({"class":t.prefix+"tip_text-date",x:0,y:0,dy:"1em"});return{svg:i,tipNode:a,xTipLine:r,tipBox:s,tipRect:o,tipGroup:d,legendIcon:l,tipPathCircles:u,radius:c,tipTextDate:p}}function u(e,t,i,n){var a,r=i.tipGroup.append("g").attr("class",function(){return t.prefix+"tip_text-group-container"}),s=r.selectAll("."+t.prefix+"tip_text-group").data(n).enter().append("g").attr("class",function(e,i){return t.prefix+"tip_text-group "+t.prefix+"tip_text-group-"+i});return s.append("text").text(function(e){return e.val}).attr({"class":function(e,i){return t.prefix+"tip_text "+t.prefix+"tip_text-"+i},"data-series":function(e,t){return e.key},x:function(){return 2*i.radius+i.radius/1.5},y:function(e,t){return a=a||parseInt(d3.select(this).style("line-height")),(t+1)*a},dy:"1em"}),s.append("circle").attr({"class":function(e,i){return t.prefix+"tip_circle "+t.prefix+"tip_circle-"+i},r:function(e,t){return i.radius},cx:function(){return i.radius},cy:function(e,t){return(t+1)*a+1.5*i.radius}}),i.tipPathCircles.selectAll("circle").data(n).enter().append("circle").attr({"class":function(e,i){return t.prefix+"tip_path-circle "+t.prefix+"tip_path-circle-"+i},r:i.radius/2||2.5}),s}function p(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.series.length;l++)if("__undefined__"===o.series[l].val){d++;break}if(!d){var c=i(16).setTickFormatY,u=i(4).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[domain.length-1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o.series).text(function(e,t){return n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix=""),e.val?n.yAxis.prefix+c(n.yAxis.format,e.val)+n.yAxis.suffix:"n/a"}),e.tipTextDate.call(v,ctx,n.monthsAbr,o.key),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o.series).classed(n.prefix+"active",function(e,t){return!!e.val}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o.series).classed(n.prefix+"active",function(e){return!!e.val}).attr({cx:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,cy:function(e){return e.val?n.rendered.plot.yScaleObj.scale(e.val):void 0}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()}),e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function f(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.series.length;l++)if("__undefined__"===o.series[l].val){d++;break}if(!d){var c=i(16).setTickFormatY,u=i(4).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[domain.length-1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o.series).text(function(e,t){return n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix=""),e.val?n.yAxis.prefix+c(n.yAxis.format,e.val)+n.yAxis.suffix:"n/a"}),e.tipTextDate.call(v,ctx,n.monthsAbr,o.key),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o.series).classed(n.prefix+"active",function(e,t){return!!e.val}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o.series).classed(n.prefix+"active",function(e){return!!e.val}).attr({cx:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,cy:function(e){return e.val?n.rendered.plot.yScaleObj.scale(e.val):void 0}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()}),e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function x(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.length;l++)if(NaN===o[l].y||NaN===o[l].y0){d++;break}if(!d){var c=i(16).setTickFormatY,u=i(4).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[domain.length-1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o).text(function(e,t){n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix="");for(var i,a=0;a<o.length;a++){if(0===t){if("__undefined__"!==e.raw.series[t].val){i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}i="n/a";break}if(a===t){for(var r=0,s=0;t>s;s++)if("__undefined__"===e.raw.series[s].val){r++;break}if(r||"__undefined__"===e.raw.series[t].val){i="n/a";break}i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}}return i}),e.tipTextDate.call(v,ctx,n.monthsAbr,o[0].x),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"!==e.raw.series[t].val&&!i}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"!==e.raw.series[t].val&&!i}).attr({cx:function(e){return n.rendered.plot.xScaleObj.scale(e.x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight},cy:function(e){var t=e.y||0,i=e.y0||0;return n.rendered.plot.yScaleObj.scale(t+i)}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()}),e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function h(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.length;l++)if(NaN===o[l].y||NaN===o[l].y0){d++;break}if(!d){var c=i(16).setTickFormatY,u=i(4).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[domain.length-1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o).text(function(e,t){n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix="");for(var i,a=0;a<o.length;a++){if(0===t){if("__undefined__"!==e.raw.series[t].val){i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}i="n/a";break}if(a===t){for(var r=0,s=0;t>s;s++)if("__undefined__"===e.raw.series[s].val){r++;break}if(r||"__undefined__"===e.raw.series[t].val){i="n/a";break}i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}}return i}),e.tipTextDate.call(v,ctx,n.monthsAbr,o[0].x),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"!==e.raw.series[t].val&&!i}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"!==e.raw.series[t].val&&!i}).attr({cx:function(e){return n.rendered.plot.xScaleObj.scale(e.x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight},cy:function(e){var t=e.y||0,i=e.y0||0;return n.rendered.plot.yScaleObj.scale(t+i)}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()}),e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function m(e,t,n,a){for(var r=t.rendered.plot.columnItem.selectAll("rect"),o=0,d=a,l=n,c=0;c<l.series.length;c++)if("__undefined__"===l.series[c].val){o++;break}if(!o){var u=i(16).setTickFormatY,p=i(4).timeDiff,f=i(4).getTranslateXY,x=t.rendered.plot.xScaleObj.scale.domain(),h=p(x[0],x[x.length-1],8);f(d.parentNode);r.classed(t.prefix+"muted",function(){return this!==d}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group text").data(l.series).text(function(e,i){return t.yAxis.prefix||(t.yAxis.prefix=""),t.yAxis.suffix||(t.yAxis.suffix=""),e.val?t.yAxis.prefix+u(t.yAxis.format,e.val)+t.yAxis.suffix:"n/a"}),void 0!==t.dateFormat?e.tipTextDate.call(v,h,t.monthsAbr,l.key):e.tipTextDate.text(l.key),e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(l.series).classed(t.prefix+"active",function(e,t){return!!e.val}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+t.dimensions.tipPadding.left+t.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+t.dimensions.tipPadding.top+t.dimensions.tipPadding.bottom}),e.tipBox.attr({transform:function(){var e=t.rendered.plot.xScaleObj.scale(l.key)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight+t.dimensions.tipOffset.horizontal;if(e>t.dimensions.tickWidth()/2)var e=t.rendered.plot.xScaleObj.scale(l.key)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-t.dimensions.tipOffset.horizontal;return"translate("+e+","+t.dimensions.tipOffset.vertical+")";
}}),s(e,t)}}function g(e,t,n,a){for(var r=t.rendered.plot.series.selectAll("rect"),s=0,o=a,d=n,l=0;l<d.raw.series.length;l++)if("__undefined__"===d.raw.series[l].val){s++;break}if(!s){var c=i(16).setTickFormatY,u=i(4).timeDiff,p=t.rendered.plot.xScaleObj.scale.domain(),f=u(p[0],p[p.length-1],8),x=(d3.select(o.parentNode.parentNode),d3.select(o).attr("x")),h="";r.classed(t.prefix+"muted",function(e){return this===o&&(h=e.raw.key),this!==o}),r.classed(t.prefix+"muted",function(e){return e.raw.key!==h}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group text").data(d.raw.series).text(function(e,i){return t.yAxis.prefix||(t.yAxis.prefix=""),t.yAxis.suffix||(t.yAxis.suffix=""),e.val?t.yAxis.prefix+c(t.yAxis.format,e.val)+t.yAxis.suffix:"n/a"}),void 0!==t.dateFormat?e.tipTextDate.call(v,f,t.monthsAbr,d.key):e.tipTextDate.text(function(){var e=d.raw.key;return e}),e.tipGroup.append("circle").attr({"class":function(e,i){return t.prefix+"tip_circle "+t.prefix+"tip_circle-"+i},r:function(t,i){return e.radius},cx:function(){return e.radius},cy:function(e,t){return(t+1)*parseInt(d3.select(this).style("font-size"))*1.13+9}}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(d.raw.series).classed(t.prefix+"active",function(e,t){return!!e.val}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+t.dimensions.tipPadding.left+t.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+t.dimensions.tipPadding.top+t.dimensions.tipPadding.bottom}),e.tipBox.attr({transform:function(){if(x>t.dimensions.tickWidth()/2)var e=t.rendered.plot.xScaleObj.scale(d.x)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-t.dimensions.tipOffset.horizontal;else var e=t.rendered.plot.xScaleObj.scale(d.x)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight+t.dimensions.tipOffset.horizontal;return"translate("+e+","+t.dimensions.tipOffset.vertical+")"}})}}function v(e,t,i,n){var a,r,s,o,d;e.text(function(){var e,l=n;switch(t){case"years":e=l.getFullYear();break;case"months":a=i[l.getMonth()],r=l.getDate(),s=l.getFullYear(),e=a+" "+r+", "+s;break;case"weeks":case"days":a=i[l.getMonth()],r=l.getDate(),s=l.getFullYear(),e=a+" "+r;break;case"hours":r=l.getDate(),o=l.getHours(),d=l.getMinutes();var c,u,p=o>=12?"p.m.":"a.m.";c=0===o?12:o>12?o-12:o,u=0===d?"":10>d?":0"+d:":"+d,e=c+u+" "+p;break;default:e=l}return e})}var y;e.exports=l},function(e,t,i){function n(e,t){var i=[];for(var n in t.social)if(t.social[n]){switch(t.social[n].label){case"Twitter":t.social[n].url=d(t),t.social[n].popup=!0;break;case"Facebook":t.social[n].url=r(t),t.social[n].popup=!0;break;case"Email":t.social[n].url=s(t),t.social[n].popup=!1;break;case"SMS":t.social[n].url=o(t),t.social[n].popup=!1;break;default:console.log("INCORRECT SOCIAL ITEM DEFINITION")}i.push(t.social[n])}var c=d3.select(e),u=c.select("."+t.prefix+"chart_meta");null===u.node()&&(u=c.append("div").attr("class",t.prefix+"chart_meta"));var p=u.append("div").attr("class",t.prefix+"chart_meta_btn").html("share"),f=c.append("div").attr("class",t.prefix+"chart_social"),x=f.append("div").attr("class",t.prefix+"chart_social_close").html("&#xd7;"),h=f.append("div").attr("class",t.prefix+"chart_social_options");h.append("h3").html("Share this chart:"),p.on("click",function(){f.classed(t.prefix+"active",!0)}),x.on("click",function(){f.classed(t.prefix+"active",!1)});for(var m=i.length,g=0;m>g;g++)h.selectAll("."+t.prefix+"social-item").data(i).enter().append("div").attr("class",t.prefix+"social-item").html(function(e){return e.popup?'<a class="'+t.prefix+'js-share" href="'+e.url+'"><img class="'+t.prefix+'social-icon" src="'+e.icon+'" title="'+e.label+'"/></a>':'<a href="'+e.url+'"><img class="'+t.prefix+'social-icon" src="'+e.icon+'" title="'+e.label+'"/></a>'});t.image&&t.image.enable&&h.append("div").attr("class",t.prefix+"image-url").attr("contentEditable","true").html(l(t));var v=document.querySelectorAll("."+t.prefix+"js-share");return v&&[].forEach.call(v,function(e){e.addEventListener("click",function(e){e.preventDefault(),a(this.href,600,620)})}),{meta_nav:u}}function a(e,t,i){var n=screen.width/2-t/2,a=screen.height/2-i/2;window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+t+",height="+i+",top="+a+",left="+n)}function r(e){var t="https://www.facebook.com/dialog/share?",i=e.social.facebook.redirect,n="app_id="+e.social.facebook.appID+"&amp;display=popup&amp;title="+e.heading+"&amp;description=From%20article"+document.title+"&amp;href="+window.location.href+"&amp;redirect_uri="+i;return e.image&&e.image.enable&&(n+="&amp;picture="+l(e)),t+n}function s(e){var t="mailto:?",i=e.image&&e.image.enable?"%0A"+l(e):"";return t+"subject="+e.heading+"&amp;body="+e.heading+i+"%0Afrom article: "+document.title+"%0A"+window.location.href}function o(e){var t="sms:",i="&body=Check%20out%20this%20chart: "+e.heading;return e.image&&e.image.enable&&(i+="%20"+l(e)),t+i}function d(e){var t="https://twitter.com/intent/tweet?",i=e.social.twitter.hashtag?"&amp;hashtags="+e.social.twitter.hashtag:"",n=e.social.twitter.via?"&amp;via="+e.social.twitter.via:"",a="url="+window.location.href+n+"&amp;text="+encodeURI(e.heading)+i;return e.image&&e.image.enable&&(a+="%20"+l(e)),t+a}var l=i(4).getThumbnailPath;e.exports=n},function(e,t,i){function n(e,t){var n=d3.select(e),a=n.select("."+t.prefix+"chart_meta");null===a.node()&&(a=n.append("div").attr("class",t.prefix+"chart_meta"));var r=a.append("div").attr("class",t.prefix+"chart_meta_btn").html("data"),s=n.append("div").attr("class",t.prefix+"chart_data"),o=s.append("div").attr("class",t.prefix+"chart_data_close").html("&#xd7;"),d=s.append("div").attr("class",t.prefix+"chart_data_inner");s.append("h2").html(t.heading);var l=s.append("div").attr("class",t.prefix+"chart_data_nav"),c=l.append("a").attr("class",t.prefix+"chart_data_btn csv").html("download csv"),u=i(4).csvToTable;return u(d,t.data.csv),r.on("click",function(){s.classed(t.prefix+"active",!0)}),o.on("click",function(){s.classed(t.prefix+"active",!1)}),c.on("click",function(){var e="data:text/plain;charset=utf-8,"+encodeURIComponent(t.data.csv);d3.select(this).attr("href",e).attr("download","data_"+t.id+".csv")}),{meta_nav:a,data_panel:s}}e.exports=n},function(e,t){function i(e,t,i){}e.exports=i}]);