!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){/**
	 * Chart Tool.
	 * @version 1.1.0
	 * @author Jeremy Agius <jagius@globeandmail.com>
	 * @author Tom Cardoso <tcardoso@globeandmail.com>
	 * @author Michael Pereira <mpereira@globeandmail.com>
	 * @see {@link} for further information.
	 * @see {@link http://www.github.com/globeandmail/chart-tool|Chart Tool}
	 * @license MIT
	 */
!function(e){if(e.d3){var t=function(){function t(t,n){x.start(n),u=f.clearDrawn(u,n),n=f.clearObj(n),t=f.clearChart(t);var a=i(7);n.data.width=f.getBounding(t,"width"),n.dispatch=x;var r;f.svgTest(e)?r=a(t,n):f.generateThumb(t,n,p),u.push({id:n.id,chartObj:r}),n.chartObj=r,x.finish(r)}function n(e){for(var t=0;t<l.length;t++)if(l[t].id===e)return l[t]}function a(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);return t}function r(e,i){var n="."+p.baseClass()+"[data-chartid="+e+"]";t(n,{id:e,data:i})}function s(e){for(var t,i,n=0;n<l.length;n++)l[n].id===e&&(i=l[n]);t="."+p.baseClass()+"[data-chartid="+i.id+"]",f.clearDrawn(u,i),f.clearObj(i),f.clearChart(t)}function o(e){for(var i=a(e),r=0;r<i.length;r++){var s=n(i[r]),o="."+p.baseClass()+"[data-chartid="+i[r]+"]";t(o,s)}}function d(t){o(t);var i=f.debounce(o,t,p.debounce,e);d3.select(e).on("resize.debounce",i).on("resize.redraw",x.redraw(t))}var l=e.__charttool,c=e.__charttooldispatcher,u=[],p=i(1),f=i(3),x=d3.dispatch("start","finish","redraw","hoverIn","hoverOut","click");for(var h in c)if(c.hasOwnProperty(h)){if(!(d3.keys(x).indexOf(h)>-1))throw"Chart Tool does not offer a dispatcher of type '"+h+"'. For available dispatcher types, please see the ChartTool.dispatch() method.";x.on(h,c[h])}return{init:function(){return d(l)},create:function(e,i){return t(e,i)},read:function(e){return n(e)},list:function(){return a(l)},update:function(e,t){return r(e,t)},destroy:function(e){return s(e)},dispatch:function(){return d3.keys(x)},wat:function(){console.info("ChartTool v"+p.version+" is a free, open-source chart generator and front-end library maintained by The Globe and Mail. For more information, check out our GitHub repo: www.github.com/globeandmail/chart-tool")},version:p.version,build:p.build,settings:i(1),charts:i(7),components:i(8),helpers:i(6),utils:i(3),line:i(13),area:i(17),stackedArea:i(18),column:i(19),stackedColumn:i(21),streamgraph:i(22),bar:i(20)}}();e.Meteor||t.init()}else Meteor&&Meteor.isServer||console.error("Chart Tool: no D3 library detected.");e.ChartTool=t}("undefined"!=typeof window?window:this)},function(e,t,i){var n={version:"1.1.0",build:"0"},a=i(2);e.exports={CUSTOM:a.CUSTOM,version:n.version,build:n.build,id:"",data:"",dateFormat:a.dateFormat,timeFormat:a.timeFormat,image:a.image,heading:"",qualifier:"",source:"",deck:"",index:"",hasHours:!1,social:a.social,seriesHighlight:function(){return this.data.seriesAmount&&this.data.seriesAmount<=1?1:0},baseClass:function(){return this.prefix+"chart"},customClass:"",options:{type:"line",interpolation:"linear",stacked:!1,expanded:!1,head:!0,deck:!1,qualifier:!0,legend:!0,footer:!0,x_axis:!0,y_axis:!0,tips:!1,annotations:!1,range:!1,series:!1,shareData:!0,social:!0},range:{},series:{},xAxis:a.xAxis,yAxis:a.yAxis,exportable:!1,editable:!1,prefix:a.prefix,debounce:a.debounce,tipTimeout:a.tipTimeout,scaleMultiplier:a.scaleMultiplier,monthsAbr:a.monthsAbr,dimensions:{width:0,computedWidth:function(){return this.width-this.margin.left-this.margin.right},height:function(){var e=d3.scale.linear().range([300,900]).domain([this.width*this.ratioMobile,this.width*this.ratioDesktop]);return Math.round(e(this.width))},computedHeight:function(){return this.height()-this.headerHeight-this.footerHeight-this.margin.top-this.margin.bottom},ratioMobile:a.ratioMobile,ratioDesktop:a.ratioDesktop,margin:a.margin,tipPadding:a.tipPadding,tipOffset:a.tipOffset,headerHeight:0,footerHeight:0,xAxisHeight:0,yAxisHeight:function(){return this.computedHeight()-this.xAxisHeight},xAxisWidth:0,labelWidth:0,yAxisPaddingRight:a.yAxis.paddingRight,tickWidth:function(){return this.computedWidth()-(this.labelWidth+this.yAxisPaddingRight)},barHeight:a.barHeight,bands:{padding:a.bands.padding,offset:a.bands.offset,outerPadding:a.bands.outerPadding}}}},function(e,t){e.exports={CUSTOM:!0,prefix:"ct-",monthsAbr:["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec.","Jan."],debounce:500,tipTimeout:5e3,ratioMobile:1.15,ratioDesktop:.65,scaleMultiplier:1.25,dateFormat:"%Y-%m-%d",timeFormat:"%H:%M",margin:{top:10,right:3,bottom:0,left:0},tipOffset:{vertical:4,horizontal:1},tipPadding:{top:4,right:9,bottom:4,left:9},yAxis:{display:!0,scale:"linear",ticks:"auto",orient:"right",format:"comma",prefix:"",suffix:"",min:"",max:"",rescale:!1,nice:!0,paddingRight:9,tickLowerBound:3,tickUpperBound:8,tickGoal:5,widthThreshold:420,dy:"",textX:0,textY:""},xAxis:{display:!0,scale:"time",ticks:"auto",orient:"bottom",format:"auto",prefix:"",suffix:"",min:"",max:"",rescale:!1,nice:!1,rangePoints:1,tickTarget:6,ticksSmall:4,widthThreshold:420,dy:.7,upper:{tickHeight:7,textX:6,textY:7},lower:{tickHeight:12,textX:6,textY:2}},barHeight:30,bands:{padding:.06,offset:.12,outerPadding:.03},social:{facebook:{label:"Facebook",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-social-facebook.svg",redirect:"http%3A%2F%2Fbeta.images.theglobeandmail.com%2Fstatic%2Ftemplates%2Finteractives%2Fshare%2Fredirect.html",appID:"PasteAppIDHere"},twitter:{label:"Twitter",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-social-twitter.svg",via:"Organization",hashtag:""},email:{label:"Email",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-mail.svg"},sms:{label:"SMS",icon:"https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-telephone.svg"}},image:{enable:!1,base_path:"",expiration:3e4,bucket:"bucketname",region:"us-east-1",filename:"thumbnail",extension:"png",thumbnailWidth:460}}},function(e,t,i){function n(e,t,i,n){var a=-1;return function(){a>-1&&n.clearTimeout(a),a=n.setTimeout(function(){e(t)},i)}}function a(e){for(var t=document.querySelector(e);t&&t.querySelectorAll("svg").length;){var i=t.querySelectorAll("svg");i[i.length-1].parentNode.removeChild(i[i.length-1])}for(;t&&t.querySelectorAll("div").length;){var n=t.querySelectorAll("div");n[n.length-1].parentNode.removeChild(n[n.length-1])}return e}function r(e){return e.chartObj&&(e.chartObj=void 0),e}function s(e,t){if(e.length)for(var i=e.length-1;i>=0;i--)e[i].id===t.id&&e.splice(i,1);return e}function o(e,t){return document.querySelector(e).getBoundingClientRect()[t]}function d(){this.sec=1e3,this.min=60*this.sec,this.hour=60*this.min,this.day=24*this.hour,this.week=7*this.day,this.month=30*this.day,this.year=365*this.day}function l(e,t){e.each(function(){for(var e,i=d3.select(this),n=i.text().split(/\s+/).reverse(),a=[],r=0,s=1,o=0,d=i.attr("y"),l=parseFloat(i.attr("dy")),c=i.text(null).append("tspan").attr("x",o).attr("y",d).attr("dy",l+"em");e=n.pop();)a.push(e),c.text(a.join(" ")),c.node().getComputedTextLength()>t&&a.length>1&&(a.pop(),c.text(a.join(" ")),a=[e],c=i.append("tspan").attr("x",o).attr("y",d).attr("dy",++r*s+l+"em").text(e))})}function c(e,t,i){var n=t-e,a=new d;return n/a.year>i?"years":n/a.month>i?"months":n/a.week>i?"weeks":n/a.day>i?"days":n/a.hour>i?"hours":n/a.min>i?"minutes":"days"}function u(e){for(var t,i=e.length,n=e[0].key,a=e[i-1].key,r=[{type:"years",step:1},{type:"months",step:3},{type:"months",step:1},{type:"days",step:1},{type:"hours",step:1},{type:"minutes",step:1}],s=0;s<r.length;s++){var o=d3.time[r[s].type](n,a,r[s].step).length;if(o>=i){var t=o;break}}return t}function p(e){return d3.transform(d3.select(e).attr("transform")).translate}function f(e,t){return"translate("+e+", "+t+")"}function x(e){return!!e.document&&!!e.document.createElementNS&&!!e.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function h(e,t,i){var n=i.image,a=document.querySelector(e),r=a.querySelector("."+i.prefix+"base64img");if(n&&n.enable&&t.data.id){var s=document.createElement("img");s.setAttribute("src","https://s3-"+n.region+".amazonaws.com/"+n.bucket+"/"+n.base_path+t.data.id+"/"+n.filename+"."+n.extension),s.setAttribute("alt",t.data.heading),s.setAttribute("class",i.prefix+"thumbnail"),a.appendChild(s)}else r&&(r.style.display="block")}e.exports={debounce:n,clearChart:a,clearObj:r,clearDrawn:s,getBounding:o,TimeObj:d,wrapText:l,timeDiff:c,timeInterval:u,getTranslateXY:p,translate:f,svgTest:x,generateThumb:h,dataParse:i(4),factory:i(5)}},function(e,t){function i(e,t,i){return"time"===e||"ordinal-time"===e?i||t:void 0}function n(e,t,i,n,a){var r,s,o,d=d3.csv.parse(e,function(e,n){var a={};if(0===n&&(r=d3.keys(e)),t){var d=d3.time.format(t);a.key=d.parse(d3.values(e)[0])}else a.key=d3.values(e)[0];a.series=[];for(var l=1;l<d3.keys(e).length;l++){var c=d3.keys(e)[l];(0===e[c]||""===e[c])&&(e[c]="__undefined__"),i?(0===n&&(o=e[c]),s="0"===i?100*(e[c]/o-1):e[c]/o*i):s=e[c],a.series.push({val:s,key:c})}return a}),l=d[0].series.length;if(n){if("stream"===a)var c=d3.layout.stack().offset("silhouette");else var c=d3.layout.stack();var u=c(d3.range(l).map(function(e){return d.map(function(t){return{legend:r[e+1],x:t.key,y:Number(t.series[e].val),raw:t}})}))}return{csv:e,data:d,seriesAmount:l,keys:r,stackedData:u||void 0}}e.exports={inputDate:i,parse:n}},function(e,t,i){function n(e,t){var n=i(4),a=i(6),r=a.extend(e),s=t.data,o=s.chart;r.dispatch=t.dispatch,r.version=s.version||r.version,r.id=t.id||r.id,r.heading=s.heading||r.heading,r.qualifier=s.qualifier||r.qualifier,r.source=s.source||r.source,r.deck=s.deck||r.deck,r.customClass=o["class"]||r.customClass,r.xAxis=a.extend(r.xAxis,o.x_axis)||r.xAxis,r.yAxis=a.extend(r.yAxis,o.y_axis)||r.yAxis;var d=r.options,l=o.options;return d.type=o.options.type||d.type,d.interpolation=o.options.interpolation||d.interpolation,d.social=!a.isUndefined(l.social)==!0?l.social:d.social,d.shareData=!a.isUndefined(l.shareData)==!0?l.shareData:d.shareData,d.stacked=!a.isUndefined(l.stacked)==!0?l.stacked:d.stacked,d.expanded=!a.isUndefined(l.expanded)==!0?l.expanded:d.expanded,d.head=!a.isUndefined(l.head)==!0?l.head:d.head,d.deck=!a.isUndefined(l.deck)==!0?l.deck:d.deck,d.legend=!a.isUndefined(l.legend)==!0?l.legend:d.legend,d.qualifier=!a.isUndefined(l.qualifier)==!0?l.qualifier:d.qualifier,d.footer=!a.isUndefined(l.footer)==!0?l.footer:d.footer,d.x_axis=!a.isUndefined(l.x_axis)==!0?l.x_axis:d.x_axis,d.y_axis=!a.isUndefined(l.y_axis)==!0?l.y_axis:d.y_axis,d.tips=!a.isUndefined(l.tips)==!0?l.tips:d.tips,d.annotations=!a.isUndefined(l.annotations)==!0?l.annotations:d.annotations,d.range=!a.isUndefined(l.range)==!0?l.range:d.range,d.series=!a.isUndefined(l.series)==!0?l.series:d.series,d.index=!a.isUndefined(l.indexed)==!0?l.indexed:d.index,r.baseClass=s.baseClass||r.baseClass,r.dimensions.width=s.width||r.dimensions.width,r.prefix=o.prefix||r.prefix,r.exportable=o.exportable||r.exportable,r.editable=o.editable||r.editable,r.exportable&&(r.dimensions.width=o.exportable.width||s.width||r.dimensions.width,r.dimensions.height=function(){return o.exportable.height}),o.hasHours&&(r.dateFormat+=" "+r.timeFormat),r.hasHours=o.hasHours||r.hasHours,r.dateFormat=o.dateFormat||r.dateFormat,r.dateFormat=n.inputDate(r.xAxis.scale,r.dateFormat,o.date_format),r.data=n.parse(o.data,r.dateFormat,d.index,d.stacked,d.type)||r.data,r}e.exports=n},function(e,t){function n(e){return e%1===0}function a(e){return e===+e&&e!==(0|e)}function r(e){if(e.constructor==Object){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return e.constructor==Array?!e.length:!e}function s(e){return void 0===e?!0:!1}function o(e,t){var i,n,a,r={},s={},o=[];for(i=0,n=e.length;n>i;i++)r[e[i]]=!0;for(i=0,n=t.length;n>i;i++)s[t[i]]=!0;for(a in r)a in s||o.push(a);for(a in s)a in r||o.push(a);return o}function d(e,t){var n=[];for(i in e)t.indexOf(e[i])>-1&&n.push(e[i]);return n}function l(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var i in e)t[i]="undefined"==typeof t[i]?l(e[i],null):t[i];return t}function c(e,t){return o(d3.keys(e),d3.keys(t))}function u(e,t){return d(d3.keys(e),d3.keys(t))}function p(e){return void 0===e?"":e}e.exports={isInteger:n,isFloat:a,isEmpty:r,isUndefined:s,extend:l,arrayDiff:o,arraySame:d,uniqueKeys:c,sameKeys:u,cleanStr:p}},function(e,t,i){function n(e,t){var n=i(5),a=i(1),r=i(8),s=new n(a,t),o=s.rendered={};s.options.head&&(o.header=r.header(e,s)),s.options.footer&&(o.footer=r.footer(e,s));var d=r.base(e,s);if(o.container=d,o.plot=r.plot(d,s),s.options.qualifier&&(o.qualifier=r.qualifier(d,s)),s.options.tips&&(o.tips=r.tips(d,s)),s.options.shareData&&(o.shareData=r.shareData(e,s)),s.options.social&&(o.social=r.social(e,s)),s.CUSTOM){var l=i(27);o.custom=l(d,s,o)}return s}e.exports=n},function(e,t,i){var n={base:i(9),header:i(10),footer:i(11),plot:i(12),qualifier:i(23),axis:i(14),scale:i(15),tips:i(24),social:i(25),shareData:i(26)};e.exports=n},function(e,t){function i(e,t){var i=t.dimensions.margin,n=d3.select(e).insert("svg","."+t.prefix+"chart_source").attr({"class":t.baseClass()+"_svg "+t.prefix+t.customClass+" "+t.prefix+"type_"+t.options.type+" "+t.prefix+"series-"+t.data.seriesAmount,width:t.dimensions.computedWidth()+i.left+i.right,height:t.dimensions.computedHeight()+i.top+i.bottom,version:1.1,xmlns:"http://www.w3.org/2000/svg"});n.append("rect").attr({"class":t.prefix+"bg",x:0,y:0,width:t.dimensions.computedWidth(),height:t.dimensions.computedHeight(),transform:"translate("+i.left+","+i.top+")"});var a=n.append("g").attr({"class":t.prefix+"graph",transform:"translate("+i.left+","+i.top+")"});return a}e.exports=i},function(e,t,i){function n(e,t){var n=i(6),a=d3.select(e).append("div").classed(t.prefix+"chart_title "+t.prefix+t.customClass,!0);a.append("div").attr("class",t.prefix+"chart_title-text").text(t.heading),t.editable&&a.select("."+t.prefix+"chart_title-text").attr("contentEditable",!0).classed("editable-chart_title",!0);var r;if("bar"===t.options.type&&(r=a.append("div").attr({"class":function(){var e=t.prefix+"chart_qualifier "+t.prefix+"chart_qualifier-bar";return t.editable&&(e+=" editable-chart_qualifier"),e},contentEditable:function(){return t.editable?!0:!1}}).text(t.qualifier)),t.data.keys.length>2){var s=a.append("div").classed(t.prefix+"chart_legend",!0),o=n.extend(t.data.keys);o.shift(),"multiline"===t.options.type&&(o=[o[0],o[1]],s.classed(t.prefix+"chart_legend-"+t.options.type,!0));var d=s.selectAll("div."+t.prefix+"legend_item").data(o).enter().append("div").attr("class",function(e,i){return t.prefix+"legend_item "+t.prefix+"legend_item_"+i});d.append("span").attr("class",t.prefix+"legend_item_icon"),d.append("span").attr("class",t.prefix+"legend_item_text").text(function(e){return e})}return t.dimensions.headerHeight=a.node().getBoundingClientRect().height,{headerGroup:a,legend:s,qualifier:r}}e.exports=n},function(e,t){function i(e,t){var i=d3.select(e).append("div").classed(t.prefix+"chart_source",!0).append("div").attr("class",t.prefix+"chart_source-text").text(t.source);return t.editable&&i.attr("contentEditable",!0).classed("editable-chart_source",!0),t.dimensions.footerHeight=i.node().getBoundingClientRect().height,{footerGroup:i}}e.exports=i},function(e,t,i){function n(e,t){var n,a={line:i(13),multiline:i(16),area:i(17),stackedArea:i(18),column:i(19),bar:i(20),stackedColumn:i(21),streamgraph:i(22)};switch(t.options.type){case"line":n=a.line(e,t);break;case"multiline":n=a.multiline(e,t);break;case"area":n=t.options.stacked?a.stackedArea(e,t):a.area(e,t);break;case"bar":n=a.bar(e,t);break;case"column":n=t.options.stacked?a.stackedColumn(e,t):a.column(e,t);break;case"stream":n=a.streamgraph(e,t);break;default:n=a.line(e,t)}return n}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;n.axisCleanup(e,t,u,p),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),g=f.append("path").datum(t.data.data).attr({d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+h;return e}}).on("mouseover",function(e){t.dispatch.hoverIn(this,t,e)}).on("mouseout",function(e){t.dispatch.hoverOut(this,t,e)}).on("click",function(e){t.dispatch.click(this,t,e)});x.push(g)}var x=x.reverse(),v=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e},d:v}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:v,line:m}}e.exports=n},function(e,t,i){function n(e,t){var i=d3.svg.axis().scale(t).orient(e.orient);return i}function a(e,t,i,a){var r=t[a],d=new n(r,i),l=e.select("."+t.prefix+"axis-group."+t.prefix+a).node();null!==l&&d3.select(l).remove();var c=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+a);return"xAxis"===a?s(c,t,i,d,a):"yAxis"===a&&o(c,t,i,d,a),{node:c,axis:d}}function r(e){switch(e){case"years":return d3.time.format("%Y");case"months":return d3.time.format("%b");case"weeks":return d3.time.format("%W");case"days":return d3.time.format("%j");case"hours":return d3.time.format("%H");case"minutes":return d3.time.format("%M")}}function s(e,t,i,n,a){var r,s=t[a];r=t.exportable&&t.exportable.x_axis?t.exportable.x_axis:s,e.attr("transform","translate(0,"+t.dimensions.yAxisHeight()+")");var o=e.append("g").attr("class",t.prefix+"x-axis");switch(s.scale){case"time":d(o,t,i,n,r);break;case"ordinal":l(o,i,n,r,t.dimensions);break;case"ordinal-time":c(o,t,i,n,r)}t.dimensions.xAxisHeight=o.node().getBBox().height}function o(e,t,i,n,a){var r,s=t[a];r=t.exportable&&t.exportable.y_axis?t.exportable.y_axis:s,t.dimensions.yAxisPaddingRight=r.paddingRight,e.attr("transform","translate(0,0)");var o=e.append("g").attr("class",t.prefix+"y-axis");n.tickValues(k(i,s.ticks,r)),o.call(n),o.selectAll("g").filter(function(e){return e}).classed(t.prefix+"minor",!0),o.selectAll(".tick text").attr("transform","translate(0,0)").call(x,o,t,n,s).attr({transform:"translate("+-(t.dimensions.computedWidth()-t.dimensions.labelWidth)+",0)"}),o.selectAll(".tick line").attr({x1:t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight,x2:t.dimensions.computedWidth()})}function d(e,t,n,a,s){var o=i(3).timeDiff,d=n.domain(),l=o(d[0],d[1],3),c=r(l);a.tickFormat(c);var p,f;f="auto"===s.ticks?s.tickTarget:s.ticks,p=t.dimensions.tickWidth()>s.widthThreshold?b(d,l,f):b(d,l,s.ticksSmall),"column"!==t.options.type?a.tickValues(p):a.ticks(),e.call(a),e.selectAll("text").attr({x:s.upper.textX,y:s.upper.textY,dy:s.dy+"em"}).style("text-anchor","start").call(u,l,s.ems,t.monthsAbr),"column"===t.options.type&&v(e,l),e.selectAll(".tick").call(g),e.selectAll("line").attr("y2",s.upper.tickHeight)}function l(e,t,n,a,r){var s=i(3).wrapText;n.tickPadding(0),t.rangeExtent([0,r.tickWidth()]),t.rangeRoundBands([0,r.tickWidth()],r.bands.padding,r.bands.outerPadding);var o=t.rangeBand();e.call(n),e.selectAll("text").style("text-anchor","middle").attr("dy",a.dy+"em").call(s,o);var d=-1*d3.transform(e.select(".tick").attr("transform")).translate[0],l=-(o/2)-o*r.bands.outerPadding;e.selectAll("line").attr({x1:l,x2:l}),e.select("line").attr({x1:d,x2:d}),e.selectAll("line").attr("y2",a.upper.tickHeight);var c=e.append("g").attr({"class":"tick",transform:"translate("+(r.tickWidth()+o/2+o*r.bands.outerPadding)+",0)"});c.append("line").attr({y2:a.upper.tickHeight,x1:l,x2:l})}function c(e,t,n,a,s){var o=i(3).timeDiff,d=n.domain(),l=o(d[0],d[d.length-1],3),c=r(l);if(a.tickFormat(c),e.call(a),e.selectAll("text").attr({x:s.upper.textX,y:s.upper.textY,dy:s.dy+"em"}).style("text-anchor","start").call(u,l,s.ems,t.monthsAbr),t.dimensions.computedWidth()>t.xAxis.widthThreshold)var p=3;else var p=4;e.selectAll(".tick").call(A,e,l,n,p),e.selectAll("line").attr("y2",s.upper.tickHeight)}function u(e,t,i,n){var a,r,s,o,d,l,c,u;e.text(function(e){var p,f=d3.select(this);switch(t){case"years":p=e.getFullYear();break;case"months":d=n[e.getMonth()],o=e.getFullYear(),o!==a&&m(f,o,i),p=d,a=o;break;case"weeks":case"days":o=e.getFullYear(),d=n[e.getMonth()],l=e.getDate(),p=d!==r?d+" "+l:l,o!==a&&m(f,o,i),r=d,a=o;break;case"hours":d=n[e.getMonth()],l=e.getDate(),c=e.getHours(),u=e.getMinutes();var x,h,g=c>=12?"p.m.":"a.m.";if(x=0===c?12:c>12?c-12:c,h=0===u?"":10>u?":0"+u:":"+u,p=x+h+" "+g,l!==s){var v=d+" "+l;m(f,v,i)}s=l;break;default:p=e}return p})}function p(e,t,n){var a,r=i(6).isFloat;switch(e){case"general":a=d3.format("g")(t);break;case"si":var s=d3.formatPrefix(n),e=d3.format(".1f");a=e(s.scale(t))+s.symbol;break;case"comma":a=r(parseFloat(t))?d3.format(",.2f")(t):d3.format(",g")(t);break;case"round1":a=d3.format(",.1f")(t);break;case"round2":a=d3.format(",.2f")(t);break;case"round3":a=d3.format(",.3f")(t);break;case"round4":a=d3.format(",.4f")(t);break;default:a=d3.format(",g")(t)}return a}function f(e,t,i,n,a){var r=n.tickValues()[n.tickValues().length-1];e.text(function(e,t){var i=p(a.format,e,r);return t===n.tickValues().length-1&&(i=(a.prefix||"")+i+(a.suffix||"")),i})}function x(e,t,i,n,a){var r=[],s=n.tickValues()[n.tickValues().length-1];e.attr("transform","translate(0,0)").text(function(e,t){var i=p(a.format,e,s);return t===n.tickValues().length-1&&(i=(a.prefix||"")+i+(a.suffix||"")),i}).text(function(){var e=d3.select(this),t=e.node().getBoundingClientRect().width;return r.push(t),e.text()}).attr({dy:function(){return""!==a.dy?a.dy+"em":d3.select(this).attr("dy")},x:function(){return""!==a.textX?a.textX:d3.select(this).attr("x")},y:function(){return""!==a.textY?a.textY:d3.select(this).attr("y")}}),i.dimensions.labelWidth=d3.max(r)}function h(e,t){var i=e.attr("x");e.attr("transform","translate("+(t.labelWidth-(i-1))+",0)"),e.attr("x",2*i)}function m(e,t,i){var n=e.property("nodeName"),a=d3.select(e.node().parentNode),r=i||1.6,s=parseFloat(e.attr("dy")),o=parseFloat(e.attr("x")),d=a.append(n).attr("dy",r+s+"em").attr("x",o).text(function(){return t});return d}function g(e,t){for(var t=t||{},i=t.tolerance||0,n=t.from||0,a=t.to||e[0].length,r=n;a>r;r++){var s=e[0][r],o=e[0][r+1];if(s&&o&&s.getBoundingClientRect&&o.getBoundingClientRect)for(;s.getBoundingClientRect().right+i>o.getBoundingClientRect().left&&(d3.select(o).data()[0]===e.data()[a]?d3.select(s).remove():d3.select(o).remove(),r++,o=e[0][r+1]););}}function v(e,t){var i,n,a,r,s,o,d,l,c,u,p=e.selectAll(".tick");p.each(function(e){switch(t){case"years":o=e.getFullYear(),o===i&&d3.select(this).remove(),i=o;break;case"months":o=e.getFullYear(),d=e.getMonth(),d===n&&o===i&&d3.select(this).remove(),n=d,i=o;break;case"weeks":case"days":o=e.getFullYear(),d=e.getMonth(),l=e.getDate(),l===a&&d===n&&o===i&&d3.select(this).remove(),a=l,n=d,i=o;break;case"hours":l=e.getDate(),c=e.getHours(),u=e.getMinutes(),l===a&&c===r&&u===s&&d3.select(this).remove(),a=l,r=c,s=u}})}function y(e,t){var i=e.node().getBBox().width,n=e.selectAll(".tick")[0];if(n.length){var a=d3.transform(d3.select(n[0]).attr("transform")).translate[0];if(i+a>=t){var r=n[n.length-1];d3.select(r).attr("class","last-tick-hide"),i=e.node().getBBox().width,n=e.selectAll(".tick")[0]}}}function b(e,t,i){for(var n,a=e[0],r=e[1],s=1,o=12,d=[],l=s;o>=l;l++){var c={};c.interval=l,c.arr=d3.time[t](a,r,l).length,d.push(c)}d.length>1?n=d.reduce(function(e,t){return Math.abs(t.arr-i)<Math.abs(e.arr-i)?t:e}):1===d.length?n=d[0]:n.interval=1;var u=d3.time[t](a,r,n.interval),p=u[0]-a,f=u[1]-u[0];return p>f/2&&u.unshift(a),u}function k(e,t,i){var n=e.domain()[0],a=e.domain()[1];if("auto"!==t)return e.ticks(t);for(var r,s=i.tickLowerBound,o=i.tickUpperBound,d=i.tickGoal,l=[],c=[],u=s;o>=u;u++){var p=e.ticks(u);0>n?p[0]===n&&p[p.length-1]===a&&l.push(p):p[p.length-1]===a&&l.push(p)}l.forEach(function(e){c.push(e.length)});var r;return r=c.length>1?c.reduce(function(e,t){return Math.abs(t-d)<Math.abs(e-d)?t:e}):1===c.length?c[0]:null,e.ticks(r)}function A(e,t,i,n,a){var r,s,o,d,l,c,u=n.domain(),p=[];e.each(function(e){switch(i){case"years":case"months":d=e.getFullYear(),d!==r&&p.push(e),r=e.getFullYear();break;case"weeks":case"days":d=e.getFullYear(),l=e.getMonth(),l!==s&&d!==r?p.push(e):l!==s?p.push(e):d!==r&&p.push(e),s=e.getMonth(),r=e.getFullYear();break;case"hours":c=e.getDate(),c!==o&&p.push(e),o=c}}),v(t,i);for(var f,x,h=0;h<p.length+1;h++)0===h?(f=0,x=u.indexOf(p[0])):h===p.length?(f=u.indexOf(p[h-1]),x=u.length-1):(f=u.indexOf(p[h-1]),x=u.indexOf(p[h])),x-f&&g(e,{ticks:u,from:f,to:x,tolerance:a})}function _(e,t,n,r){r.axis.scale().range([t.dimensions.yAxisHeight(),0]),r.node.call(r.axis);var s=r.node.select("."+t.prefix+"y-axis"),o=t.yAxis;s.selectAll(".tick text").attr("transform","translate(0,0)").call(x,s,t,r.axis,o).call(h,t.dimensions),s.selectAll(".tick line").attr({x1:t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight,x2:t.dimensions.computedWidth()});var d=i(15).setRangeType,l=i(15).setRangeArgs,c={rangeType:d(t.xAxis),range:n.range||[0,t.dimensions.tickWidth()],bands:t.dimensions.bands,rangePoints:t.xAxis.rangePoints};l(n.axis.scale(),c),n=a(e,t,n.axis.scale(),"xAxis"),n.node.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")"),"ordinal"!==t.xAxis.scale&&y(n.node,t.dimensions.tickWidth())}function w(e,t,i,n){var a=i.axis.tickValues(),r=a[0],s=a[a.length-1];if(0>=r&&s>=0){var o=i.node.selectAll(".tick:not(."+e.prefix+"minor)"),d=o.select("line"),l=t.append("line").style("shape-rendering","crispEdges").attr("class",e.prefix+"zero-line"),c=[0,0];c[0]+=d3.transform(t.select("."+e.prefix+n).attr("transform")).translate[0],c[1]+=d3.transform(t.select("."+e.prefix+n).attr("transform")).translate[1],c[0]+=d3.transform(o.attr("transform")).translate[0],c[1]+=d3.transform(o.attr("transform")).translate[1],"xAxis"===n?l.attr({y1:d.attr("y1"),y2:d.attr("y2"),x1:0,x2:0,transform:"translate("+c[0]+","+c[1]+")"}):"yAxis"===n&&l.attr({x1:d.attr("x1"),x2:d.attr("x2"),y1:0,y2:0,transform:"translate("+c[0]+","+c[1]+")"}),d.style("display","none")}}e.exports={AxisFactory:n,axisManager:a,determineFormat:r,appendXAxis:s,appendYAxis:o,timeAxis:d,discreteAxis:l,ordinalTimeAxis:c,setTickFormatX:u,setTickFormatY:p,updateTextX:f,updateTextY:x,repositionTextY:h,newTextNode:m,dropTicks:g,dropOversetTicks:y,dropRedundantTicks:v,tickFinderX:b,tickFinderY:k,axisCleanup:_,addZeroLine:w}},function(e,t,i){function n(e,t){var i=e[t],n=new a(e,i,t),s=r(n.type);return s.domain(n.domain),d(s,n),i.nice&&h(s,t,n),i.rescale&&f(s,t,i),{obj:n,scale:s}}function a(e,t,i){this.type=t.scale,this.domain=l(e,t),this.rangeType=s(t),this.range=o(e,i),this.bands=e.dimensions.bands,this.rangePoints=t.rangePoints||1}function r(e){var t;switch(e){case"time":t=d3.time.scale();break;case"ordinal":case"ordinal-time":t=d3.scale.ordinal();break;case"linear":t=d3.scale.linear();break;case"identity":t=d3.scale.identity();break;case"pow":t=d3.scale.pow();break;case"sqrt":t=d3.scale.sqrt();break;case"log":t=d3.scale.log();break;case"quantize":t=d3.scale.quantize();break;case"quantile":t=d3.scale.quantile();break;case"threshold":t=d3.scale.threshold();break;default:t=d3.scale.linear()}return t}function s(e){var t;switch(e.scale){case"time":case"linear":t="range";break;case"ordinal":case"discrete":t="rangeRoundBands";break;case"ordinal-time":t="rangePoints";break;default:t="range"}return t}function o(e,t){var i;return"xAxis"===t?i=[0,e.dimensions.tickWidth()]:"yAxis"===t&&(i=[e.dimensions.yAxisHeight(),0]),i}function d(e,t){switch(t.rangeType){case"range":return e[t.rangeType](t.range);case"rangeRoundBands":return e[t.rangeType](t.range,t.bands.padding,t.bands.outerPadding);case"rangePoints":return e[t.rangeType](t.range,t.rangePoints)}}function l(e,t){var i,n=e.data;switch(t.scale){case"time":i=c(n,t.min,t.max);break;case"linear":var a,r=e.options.type;("area"===r||"column"===r||"bar"===r)&&(a=!0),i=u(n,t.min,t.max,e.options.stacked,a);break;case"ordinal":case"ordinal-time":i=p(n)}return i}function c(e,t,i){if(t&&i)var n=t,a=i;else var r=d3.extent(e.data,function(e){return e.key}),n=t||new Date(r[0]),a=i||new Date(r[1]);return[n,a]}function u(e,t,i,n,a){var r,s,o=[];return d3.map(e.data,function(e){for(var t=0;t<e.series.length;t++)o.push(Number(e.series[t].val))}),s=n?d3.max(e.stackedData[e.stackedData.length-1],function(e){return e.y0+e.y}):d3.max(o),r=d3.min(o),t?r=t:r>0&&(r=0),i?s=i:0>s&&a&&(s=0),[r,s]}function p(e){return e.data.map(function(e){return e.key})}function f(e,t,i){switch(i.scale){case"linear":i.max||x(e,i)}}function x(e,t){var i=e.ticks(10).slice(),n=Math.abs(i[i.length-1])-Math.abs(i[i.length-2]),a=i[i.length-1]+n;e.domain([e.domain()[0],a])}function h(e,t,n){switch(n.type){case"time":var a=i(3).timeDiff,r=a(e.domain()[0],e.domain()[1],3);m(e,r);break;case"linear":g(e)}}function m(e,t){var n=i(3).timeInterval,a=n(t);e.domain(e.domain()).nice(a)}function g(e){e.domain(e.domain()).nice()}e.exports={scaleManager:n,ScaleObj:a,setScaleType:r,setRangeType:s,setRangeArgs:d,setRange:o,setDomain:l,setDateDomain:c,setNumericalDomain:u,setDiscreteDomain:p,rescale:f,rescaleNumerical:x,niceify:h,niceifyTime:m,niceifyNumerical:g}},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),g=f.append("path").datum(t.data.data).attr({d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"multiline "+t.prefix+"multiline-"+h;return e}}).on("mouseover",function(e){t.dispatch.hoverIn(this,t,e)}).on("mouseout",function(e){t.dispatch.hoverOut(this,t,e)}).on("click",function(e){t.dispatch.click(this,t,e)});x.push(g)}var x=x.reverse(),v=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"multiline "+t.prefix+"multiline-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e},d:v}).on("mouseover",function(e){t.dispatch.hoverIn(this,t,e)}).on("mouseout",function(e){t.dispatch.hoverOut(this,t,e)}).on("click",function(e){t.dispatch.click(this,t,e)}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:v,line:m}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),
1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0});for(var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=[],h=t.data.seriesAmount-1;h>=0;h--)if(h!==t.seriesHighlight()){var m=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y0(c(0)).y1(function(e){return c(e.series[h].val)}),g=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[h].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[h].val)}),v=f.append("path").datum(t.data.data).attr({d:m,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"fill "+t.prefix+"fill-"+h;return e}});f.append("path").datum(t.data.data).attr({d:g,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+h;return e}}),x.push(v)}var x=x.reverse(),y=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y0(c(0)).y1(function(e){return c(e.series[t.seriesHighlight()].val)}),b=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.series[t.seriesHighlight()].val)}).x(function(e){return l(e.key)}).y(function(e){return c(e.series[t.seriesHighlight()].val)});return f.append("path").datum(t.data.data).attr({d:y,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"fill "+t.prefix+"fill-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e}}),f.append("path").datum(t.data.data).attr({d:b,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(){var e=t.prefix+"line "+t.prefix+"line-"+t.seriesHighlight()+" "+t.prefix+"highlight";return e}}),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,hLine:b,hArea:y,line:g,area:m}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1),1===t.data.seriesAmount&&(t.seriesHighlight=function(){return 0}),e.classed(t.prefix+"stacked",!0);var f=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}),x=f.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("svg:g").attr({transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)","class":function(e,i){var n=t.prefix+"series "+t.prefix+"series_"+i;return i===t.seriesHighlight()&&(n=t.prefix+"series "+t.prefix+"series_"+i+" "+t.prefix+"highlight"),n}}),h=d3.svg.area().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.y0+e.y)}).x(function(e){return l(e.x)}).y0(function(e){return c(e.y0)}).y1(function(e){return c(e.y0+e.y)}),m=d3.svg.line().interpolate(t.options.interpolation).defined(function(e){return!isNaN(e.y0+e.y)}).x(function(e){return l(e.x)}).y(function(e){return c(e.y0+e.y)});return x.append("path").attr("class",function(e,i){var n=t.prefix+"fill "+t.prefix+"fill-"+i;return i===t.seriesHighlight()&&(n=t.prefix+"fill "+t.prefix+"fill-"+i+" "+t.prefix+"highlight"),n}).attr("d",h),x.append("path").attr("class",function(e,i){return t.prefix+"line "+t.prefix+"line-"+i}).attr("d",m),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,series:x,line:m,area:h}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;switch(n.axisCleanup(e,t,u,p),t.xAxis.scale){case"time":var f=i(3).timeInterval,x=f(t.data.data)+1,h=t.dimensions.tickWidth()/x/t.data.seriesAmount;u.range=[0,t.dimensions.tickWidth()-h*t.data.seriesAmount],n.axisCleanup(e,t,u,p);break;case"ordinal-time":var h=l(t.data.data[1].key)-l(t.data.data[0].key);e.select("."+t.prefix+"axis-group."+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2)+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")");break;case"ordinal":var h=l.rangeBand()/t.data.seriesAmount}for(var m=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform",function(){var e;return e="ordinal-time"===t.xAxis.scale?t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2:t.dimensions.computedWidth()-t.dimensions.tickWidth(),"translate("+e+",0)"}),g=0;g<t.data.seriesAmount;g++){var v=m.append("g").attr("class",t.prefix+"series_"+g),y=v.selectAll("."+t.prefix+"column").data(t.data.data).enter().append("g").attr({"class":t.prefix+"column "+t.prefix+"column-"+g,"data-series":g,"data-key":function(e){return e.key},"data-legend":function(){return t.data.keys[g+1]},transform:function(e){return"ordinal-time"!==t.xAxis.scale?"translate("+l(e.key)+",0)":void 0}});if(y.append("rect").attr({"class":function(e){return e.series[g].val<0?"negative":"positive"},x:function(e){return"ordinal-time"!==t.xAxis.scale?g*h:l(e.key)},y:function(e){return"__undefined__"!==e.series[g].val?c(Math.max(0,e.series[g].val)):void 0},height:function(e){return"__undefined__"!==e.series[g].val?Math.abs(c(e.series[g].val)-c(0)):void 0},width:function(){return"ordinal-time"!==t.xAxis.scale?h:h/t.data.seriesAmount}}),t.data.seriesAmount>1){var b=t.dimensions.bands.offset;y.selectAll("rect").attr({x:function(e){return"ordinal-time"!==t.xAxis.scale?g*h+h*(b/2):l(e.key)+g*(h/t.data.seriesAmount)},width:function(){return"ordinal-time"!==t.xAxis.scale?h-h*b:h/t.data.seriesAmount}})}}return n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:m,series:v,singleColumn:h,columnItem:y}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=a.scaleManager;t.data.data.reverse();var s=9,o=new r(t,"xAxis"),d=o.scale,l=d3.svg.axis().scale(d).orient("bottom"),c=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"),u=c.append("g").attr("class",t.prefix+"x-axis").call(l),p=[];u.selectAll("text").attr("y",s).each(function(){p.push(d3.select(this).node().getBoundingClientRect().height)});var f=p.reduce(function(e,t){return e>t?e:t});t.dimensions.xAxisHeight=f+s,u.selectAll("g").filter(function(e){return e}).classed(t.prefix+"minor",!0);var x=new r(t,"yAxis"),h=x.scale;if(!t.exportable||t.exportable&&!t.exportable.dynamicHeight){var m=t.dimensions.barHeight*t.data.data.length*t.data.seriesAmount;h.rangeRoundBands([m,0],t.dimensions.bands.padding,t.dimensions.bands.outerPadding),t.dimensions.yAxisHeight=m-m*t.dimensions.bands.outerPadding*2}var g=d3.svg.axis().scale(h).orient("left"),v=e.append("g").attr("class",t.prefix+"axis-group "+t.prefix+"yAxis").attr("transform","translate(0,0)"),y=v.append("g").attr("class",t.prefix+"y-axis").call(g);if(y.selectAll("line").remove(),y.selectAll("text").attr("x",0),t.dimensions.width>t.yAxis.widthThreshold)var b=t.dimensions.computedWidth()/3.5;else var b=t.dimensions.computedWidth()/3;if(y.node().getBBox().width>b){var k=i(3).wrapText;y.selectAll("text").call(k,b).each(function(){var e=d3.select(this).selectAll("tspan"),t=e[0].length,i=d3.select(this).node().getBBox().height;t>1&&e.attr({y:i/t/2-i/2})})}t.dimensions.labelWidth=y.node().getBBox().width,v.attr("transform","translate("+t.dimensions.labelWidth+",0)"),t.exportable&&t.exportable.x_axis?xAxisSettings=t.exportable.x_axis:xAxisSettings=t.xAxis;var A=n.tickFinderY;if(t.xAxis.widthThreshold>t.dimensions.width)var _={tickLowerBound:3,tickUpperBound:8,tickGoal:6};else var _={tickLowerBound:3,tickUpperBound:8,tickGoal:4};var w=A(d,t.xAxis.ticks,_);d.range([0,t.dimensions.tickWidth()]),l.tickValues(w),u.call(l),u.selectAll(".tick text").attr("y",s).call(n.updateTextX,u,t,l,t.xAxis),t.exportable&&t.exportable.dynamicHeight?c.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+t.dimensions.computedHeight()+")"):c.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+m+")");var W=d3.transform(c.attr("transform")).translate[0]+c.node().getBBox().width;W>t.dimensions.computedWidth()&&(d.range([0,t.dimensions.tickWidth()-(W-t.dimensions.computedWidth())]),u.call(l),u.selectAll(".tick text").attr("y",s).call(n.updateTextX,u,t,l,t.xAxis));for(var O=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"),P=h.rangeBand()/t.data.seriesAmount,j=0;j<t.data.seriesAmount;j++){var R=O.append("g").attr("class",t.prefix+"series_"+j),T=R.selectAll("."+t.prefix+"bar").data(t.data.data).enter().append("g").attr({"class":t.prefix+"bar "+t.prefix+"bar-"+j,"data-series":j,"data-key":function(e){return e.key},"data-legend":function(){return t.data.keys[j+1]},transform:function(e){return"translate(0,"+h(e.key)+")"}});if(T.append("rect").attr({"class":function(e){return e.series[j].val<0?"negative":"positive"},x:function(e){return d(Math.min(0,e.series[j].val))},y:function(){return j*P},width:function(e){return Math.abs(d(e.series[j].val)-d(0))},height:function(e){return P}}),t.data.seriesAmount>1){var H=t.dimensions.bands.offset;T.selectAll("rect").attr({y:function(){return j*P+P*(H/2)},height:P-P*H})}}u.selectAll("g").filter(function(e){return e}).classed(t.prefix+"minor",!0),u.selectAll("line").attr({y1:function(){return t.exportable&&t.exportable.dynamicHeight?-(t.dimensions.computedHeight()-t.dimensions.xAxisHeight):-m},y2:0}),t.exportable&&t.exportable.dynamicHeight?c.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")"):(c.attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+m+")"),t.dimensions.totalXAxisHeight=c.node().getBoundingClientRect().height,t.dimensions.computedHeight=function(){return this.totalXAxisHeight},d3.select(e.node().parentNode).attr("height",function(){var e=t.dimensions.margin;return t.dimensions.computedHeight()+e.top+e.bottom}),d3.select(e.node().parentNode).select("."+t.prefix+"bg").attr({height:t.dimensions.computedHeight()}));var C={node:c,axis:l},n=i(14);return n.addZeroLine(t,e,C,"xAxis"),{xScaleObj:o,yScaleObj:x,xAxisObj:{node:c,axis:l},yAxisObj:{node:v,axis:g},seriesGroup:O,series:R,singleBar:P,barItem:T}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"yAxis"),d=new s(t,"xAxis"),l=o.scale,c=d.scale,u=new r(e,t,d.scale,"xAxis"),p=new r(e,t,o.scale,"yAxis");u.axis,p.axis;switch(n.axisCleanup(e,t,u,p),t.xAxis.scale){case"time":var f=i(3).timeInterval,x=f(t.data.data),h=t.dimensions.tickWidth()/x;u.range=[0,t.dimensions.tickWidth()-h],n.axisCleanup(e,t,u,p);break;case"ordinal-time":var h=c(t.data.data[1].key)-c(t.data.data[0].key);e.select("."+t.prefix+"axis-group."+t.prefix+"xAxis").attr("transform","translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2)+","+(t.dimensions.computedHeight()-t.dimensions.xAxisHeight)+")");break;case"ordinal":var h=c.rangeBand()}var m=e.append("g").attr("class",function(){var e=t.prefix+"series_group";return t.data.seriesAmount>1&&(e+=" "+t.prefix+"multiple"),e}).attr("transform",function(){var e;return e="ordinal-time"===t.xAxis.scale?t.dimensions.computedWidth()-t.dimensions.tickWidth()-h/2:t.dimensions.computedWidth()-t.dimensions.tickWidth(),"translate("+e+",0)"}),g=m.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("g").attr("class",function(e,i){return t.prefix+"series "+t.prefix+"series_"+i}),v=g.selectAll("rect").data(function(e){return e}).enter().append("rect").attr({"class":t.prefix+"column","data-key":function(e){return e.x},"data-legend":function(e){return e.legend},x:function(e){return c(e.x)},y:function(e){return l(Math.max(0,e.y0+e.y))},height:function(e){return Math.abs(l(e.y)-l(0))},width:h});return n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:d,yScaleObj:o,xAxisObj:u,yAxisObj:p,seriesGroup:m,series:g,rect:v}}e.exports=n},function(e,t,i){function n(e,t){var n=i(14),a=i(15),r=n.axisManager,s=a.scaleManager,o=new s(t,"xAxis"),d=new s(t,"yAxis"),l=o.scale,c=d.scale,u=new r(e,t,o.scale,"xAxis"),p=new r(e,t,d.scale,"yAxis");u.axis,p.axis;n.axisCleanup(e,t,u,p),"ordinal"===o.obj.type&&l.rangeRoundPoints([0,t.dimensions.tickWidth()],1);var f=e.append("g").attr({"class":t.prefix+"series_group",transform:function(){return"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"}}),x=f.selectAll("g."+t.prefix+"series").data(t.data.stackedData).enter().append("g").attr("class",function(e,i){return t.prefix+"series "+t.prefix+"series_"+i}),h=d3.svg.area().interpolate(t.options.interpolation).x(function(e){return l(e.x)}).y0(function(e){return c(e.y0)}).y1(function(e){return c(e.y0+e.y)}),m=d3.svg.line().interpolate(t.options.interpolation).x(function(e){return l(e.x)}).y(function(e){return c(e.y0+e.y)});return x.append("path").attr("class",function(e,i){var n=t.prefix+"stream-series "+t.prefix+"stream-"+i;return i===t.seriesHighlight()&&(n=t.prefix+"stream-series "+t.prefix+"stream-"+i+" "+t.prefix+"highlight"),n}).attr("d",h),x.append("path").attr("class",function(){return t.prefix+"stream-series "+t.prefix+"line"}).attr("d",m),n.addZeroLine(t,e,p,"yAxis"),{xScaleObj:o,yScaleObj:d,xAxisObj:u,yAxisObj:p,seriesGroup:f,series:x,line:m,area:h}}e.exports=n},function(e,t){function i(e,t){if("bar"!==t.options.type){var i=e.select("."+t.prefix+"yAxis");if(t.editable){var n=i.append("foreignObject").attr({"class":t.prefix+"fo "+t.prefix+"qualifier",width:"100%"}),a=n.append("xhtml:div").attr("xmlns","http://www.w3.org/1999/xhtml"),r=a.append("div").attr({"class":t.prefix+"chart_qualifier editable-chart_qualifier",contentEditable:!0,xmlns:"http://www.w3.org/1999/xhtml"}).text(t.qualifier);n.attr({width:r.node().getBoundingClientRect().width+15,height:r.node().getBoundingClientRect().height,transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+","+-r.node().getBoundingClientRect().height/2+")"})}else var s=i.append("text").attr("class",t.prefix+"chart_qualifier-text-bg").text(t.qualifier).attr({dy:"0.32em",y:"0",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+", 0)"}),o=i.append("text").attr("class",t.prefix+"chart_qualifier-text").text(t.qualifier).attr({dy:"0.32em",y:"0",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+", 0)"})}return{qualifierBg:s,qualifierText:o}}e.exports=i},function(e,t,i){function n(e,t,i,n){if(i){for(var a=[],r=d3.bisector(function(e){return e.x}).left,s=0;s<e.length;s++)a.push(r(e[s],t));return a}var r=d3.bisector(function(e){return e.key}).left;return r(e,t)}function a(e){return{x:d3.mouse(e.node())[0],y:d3.mouse(e.node())[1]}}function r(e,t){var i,a=e.rendered.plot.xScaleObj.scale,r=(e.rendered.plot.xScaleObj.scale,a.invert(t.x));if(e.options.stacked){for(var s,o=e.data.stackedData,d=n(o,r,e.options.stacked),l=[],c=0;c<o.length;c++)if(s)l.push(o[c][s]);else{var u=o[c][d[c]-1],p=o[c][d[c]];s=r-u.x>p.x-r?d[c]:d[c]-1,l.push(o[c][s])}i=l}else{var o=e.data.data,d=n(o,r),u=o[d-1],p=o[d];i=r-u.key>p.key-r?p:u}return i}function s(e,t){e.xTipLine.classed(t.prefix+"active",!0),e.tipBox.classed(t.prefix+"active",!0),e.tipPathCircles.classed(t.prefix+"active",!0)}function o(e,t){e.xTipLine.classed(t.prefix+"active",!1),e.tipBox.classed(t.prefix+"active",!1),e.tipPathCircles.classed(t.prefix+"active",!1)}function d(e,t,i){return setTimeout(function(){o(e,t)},t.tipTimeout)}function l(e,t){var i=c(e,t),n={line:p,multiline:p,area:t.options.stacked?x:f,column:t.options.stacked?g:m,stream:h};switch(t.options.type){case"line":case"multiline":case"area":case"stream":var a;a="multiline"===t.options.type?[t.data.data[0].series[0]]:t.data.data[0].series;var r=u(e,t,i,a);i.overlay=i.tipNode.append("rect").attr({"class":t.prefix+"tip_overlay",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)",width:t.dimensions.tickWidth(),height:t.dimensions.computedHeight()}),i.overlay.on("mouseover",function(){s(i,t)}).on("mouseout",function(){o(i,t)}).on("mousemove",function(){return s(i,t),clearTimeout(y),y=d(i,t,y),n[t.options.type](i,r,t)});break;case"column":n.column(i,t)}}function c(e,t){var i=d3.select(e.node().parentNode),n=d3.select(e.node().parentNode.parentNode),a=i.append("g").attr({transform:"translate("+t.dimensions.margin.left+","+t.dimensions.margin.top+")","class":t.prefix+"tip"}).classed(t.prefix+"tip_stacked",function(){return t.options.stacked?!0:!1}),r=a.append("g").attr("class",t.prefix+"tip_line-x").classed(t.prefix+"active",!1);r.append("line");var s=a.append("g").attr({"class":t.prefix+"tip_box",transform:"translate("+(t.dimensions.computedWidth()-t.dimensions.tickWidth())+",0)"}),o=s.append("rect").attr({"class":t.prefix+"tip_rect",transform:"translate(0,0)",width:1,height:1}),d=s.append("g").attr("class",t.prefix+"tip_group"),l=n.select("."+t.prefix+"legend_item_icon").node();if(l)var c=l.getBoundingClientRect().width/2;else var c=0;var u=a.append("g").attr("class",t.prefix+"tip_path-circle-group"),p=d.insert("g",":first-child").attr("class",t.prefix+"tip_text-date-group").append("text").attr({"class":t.prefix+"tip_text-date",x:0,y:0,dy:"1em"});return{svg:i,tipNode:a,xTipLine:r,tipBox:s,tipRect:o,tipGroup:d,legendIcon:l,tipPathCircles:u,radius:c,tipTextDate:p}}function u(e,t,i,n){var a=i.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(n).enter().append("g").attr("class",function(e,i){return t.prefix+"tip_text-group "+t.prefix+"tip_text-group-"+i});return a.append("circle").attr({"class":function(e,i){return t.prefix+"tip_circle "+t.prefix+"tip_circle-"+i},r:function(e,t){return i.radius},cx:function(){return i.radius},cy:function(e,t){return(t+1)*parseInt(d3.select(this).style("font-size"))*1.13+9}}),a.append("text").text(function(e){return e.val}).attr({"class":function(e,i){return t.prefix+"tip_text "+t.prefix+"tip_text-"+i},"data-series":function(e,t){return e.key},x:function(){return 2*i.radius+i.radius/1.5},y:function(e,t){return(t+1)*(parseInt(d3.select(this).style("font-size"))+2)},dy:"1em"}),i.tipPathCircles.selectAll("circle").data(n).enter().append("circle").attr({"class":function(e,i){return t.prefix+"tip_path-circle "+t.prefix+"tip_path-circle-"+i},r:i.radius/2||2.5}),a}function p(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.series.length;l++)if("__undefined__"===o.series[l].val){d++;break}if(!d){var c=i(14).setTickFormatY,u=i(3).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o.series).text(function(e,t){return n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix=""),e.val?n.yAxis.prefix+c(n.yAxis.format,e.val)+n.yAxis.suffix:"n/a"}),e.tipTextDate.call(v,ctx,n.monthsAbr,o.key),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o.series).classed(n.prefix+"active",function(e,t){return e.val?!0:!1}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o.series).classed(n.prefix+"active",function(e){return e.val?!0:!1}).attr({cx:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,cy:function(e){return e.val?n.rendered.plot.yScaleObj.scale(e.val):void 0}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()});var p=i(3).getTranslateXY;p(e.tipBox.node());e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function f(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.series.length;l++)if("__undefined__"===o.series[l].val){d++;break}if(!d){var c=i(14).setTickFormatY,u=i(3).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o.series).text(function(e,t){return n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix=""),e.val?n.yAxis.prefix+c(n.yAxis.format,e.val)+n.yAxis.suffix:"n/a"}),e.tipTextDate.call(v,ctx,n.monthsAbr,o.key),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o.series).classed(n.prefix+"active",function(e,t){return e.val?!0:!1}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o.series).classed(n.prefix+"active",function(e){return e.val?!0:!1}).attr({cx:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,cy:function(e){return e.val?n.rendered.plot.yScaleObj.scale(e.val):void 0}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()});var p=i(3).getTranslateXY;p(e.tipBox.node());e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o.key)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function x(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.length;l++)if(NaN===o[l].y||NaN===o[l].y0){d++;break}if(!d){var c=i(14).setTickFormatY,u=i(3).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o).text(function(e,t){n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix="");for(var i,a=0;a<o.length;a++){if(0===t){if("__undefined__"!==e.raw.series[t].val){i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}i="n/a";break}if(a===t){for(var r=0,s=0;t>s;s++)if("__undefined__"===e.raw.series[s].val){r++;break}if(r||"__undefined__"===e.raw.series[t].val){i="n/a";break}i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}}return i}),e.tipTextDate.call(v,ctx,n.monthsAbr,o[0].x),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"===e.raw.series[t].val||i?!1:!0}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"===e.raw.series[t].val||i?!1:!0}).attr({cx:function(e){return n.rendered.plot.xScaleObj.scale(e.x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight},cy:function(e){var t=e.y||0,i=e.y0||0;return n.rendered.plot.yScaleObj.scale(t+i)}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()});var p=i(3).getTranslateXY;p(e.tipBox.node());e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function h(e,t,n){for(var s=a(e.overlay),o=r(n,s),d=0,l=0;l<o.length;l++)if(NaN===o[l].y||NaN===o[l].y0){d++;break}if(!d){var c=i(14).setTickFormatY,u=i(3).timeDiff;domain=n.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[1],8),e.tipGroup.selectAll("."+n.prefix+"tip_text-group text").data(o).text(function(e,t){n.yAxis.prefix||(n.yAxis.prefix=""),n.yAxis.suffix||(n.yAxis.suffix="");for(var i,a=0;a<o.length;a++){if(0===t){if("__undefined__"!==e.raw.series[t].val){i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}i="n/a";break}if(a===t){for(var r=0,s=0;t>s;s++)if("__undefined__"===e.raw.series[s].val){r++;break}if(r||"__undefined__"===e.raw.series[t].val){i="n/a";break}i=n.yAxis.prefix+c(n.yAxis.format,e.raw.series[t].val)+n.yAxis.suffix;break}}return i}),e.tipTextDate.call(v,ctx,n.monthsAbr,o[0].x),e.tipGroup.selectAll("."+n.prefix+"tip_text-group").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"===e.raw.series[t].val||i?!1:!0}),e.tipGroup.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.dimensions.tipPadding.left;else var e=n.dimensions.tipPadding.left;var t=n.dimensions.tipPadding.top;return"translate("+e+","+t+")"}}),e.tipPathCircles.selectAll("."+n.prefix+"tip_path-circle").data(o).classed(n.prefix+"active",function(e,t){for(var i=0,n=0;t>n;n++)if("__undefined__"===e.raw.series[n].val){i++;break}return"__undefined__"===e.raw.series[t].val||i?!1:!0}).attr({cx:function(e){return n.rendered.plot.xScaleObj.scale(e.x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight},cy:function(e){var t=e.y||0,i=e.y0||0;return n.rendered.plot.yScaleObj.scale(t+i)}}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+n.dimensions.tipPadding.left+n.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+n.dimensions.tipPadding.top+n.dimensions.tipPadding.bottom}),e.xTipLine.select("line").attr({x1:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,x2:n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight,y1:0,y2:n.dimensions.yAxisHeight()});var p=i(3).getTranslateXY;p(e.tipBox.node());e.tipBox.attr({transform:function(){if(s.x>n.dimensions.tickWidth()/2)var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-n.dimensions.tipOffset.horizontal;else var e=n.rendered.plot.xScaleObj.scale(o[0].x)+n.dimensions.labelWidth+n.dimensions.yAxisPaddingRight+n.dimensions.tipOffset.horizontal;return"translate("+e+","+n.dimensions.tipOffset.vertical+")"}})}}function m(e,t){var n=t.rendered.plot.columnItem,a=n.selectAll("rect"),r=0,o=t.data.data[0].series,d=e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(o).enter().append("g").attr("class",function(e,i){return t.prefix+"tip_text-group "+t.prefix+"tip_text-group-"+i});d.append("text").text(function(e){return e.val}).attr({"class":function(e,i){return t.prefix+"tip_text "+t.prefix+"tip_text-"+i},"data-series":function(e,t){return e.key},x:function(){return 2*e.radius+e.radius/1.5},y:function(e,t){return(t+1)*(parseInt(d3.select(this).style("font-size"))+2)},dy:"1em"}),a.on("mouseover",function(n){for(var o=this,d=n,l=0;l<d.series.length;l++)if("__undefined__"===d.series[l].val){r++;break}if(!r){var c=i(14).setTickFormatY,u=i(3).timeDiff;getTranslateXY=i(3).getTranslateXY,domain=t.rendered.plot.xScaleObj.scale.domain(),ctx=u(domain[0],domain[1],8);var p=getTranslateXY(this.parentNode)[0];a.classed("muted",function(){return this===o?!1:!0}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group text").data(d.series).text(function(e,i){return t.yAxis.prefix||(t.yAxis.prefix=""),t.yAxis.suffix||(t.yAxis.suffix=""),e.val?t.yAxis.prefix+c(t.yAxis.format,e.val)+t.yAxis.suffix:"n/a"}),e.tipTextDate.call(v,ctx,t.monthsAbr,d.key),e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(d.series).classed(t.prefix+"active",function(e,t){return e.val?!0:!1}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+t.dimensions.tipPadding.left+t.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+t.dimensions.tipPadding.top+t.dimensions.tipPadding.bottom}),e.tipBox.attr({transform:function(){if(p>t.dimensions.tickWidth()/2)var e=t.rendered.plot.xScaleObj.scale(d.key)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-t.dimensions.tipOffset.horizontal;else var e=t.rendered.plot.xScaleObj.scale(d.key)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight+t.dimensions.tipOffset.horizontal;return"translate("+e+","+t.dimensions.tipOffset.vertical+")"}}),s(e,t)}})}function g(e,t){var n=t.rendered.plot.series,a=n.selectAll("rect"),r=0,o=t.data.data[0].series,d=e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(o).enter().append("g").attr("class",function(e,i){return t.prefix+"tip_text-group "+t.prefix+"tip_text-group-"+i});d.append("text").text(function(e){return e.val}).attr({"class":function(e,i){return t.prefix+"tip_text "+t.prefix+"tip_text-"+i},"data-series":function(e,t){return e.key},x:function(){return 2*e.radius+e.radius/1.5},y:function(e,t){return(t+1)*(parseInt(d3.select(this).style("font-size"))+2)},dy:"1em"}),a.on("mouseover",function(n){for(var o=this,l=n,c=0;c<l.raw.series.length;c++)if("__undefined__"===l.raw.series[c].val){r++;break}if(!r){var u=i(14).setTickFormatY,p=i(3).timeDiff;domain=t.rendered.plot.xScaleObj.scale.domain(),ctx=p(domain[0],domain[1],8);var f=d3.select(this.parentNode.parentNode);barPos=parseFloat(f.attr("transform").split("(")[1]),a.classed("muted",function(){
return this===o?!1:!0}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group text").data(l.raw.series).text(function(e,i){return t.yAxis.prefix||(t.yAxis.prefix=""),t.yAxis.suffix||(t.yAxis.suffix=""),e.val?t.yAxis.prefix+u(t.yAxis.format,e.val)+t.yAxis.suffix:"n/a"}),e.tipTextDate.text(function(){var e=l.raw.key;return e}),d.append("circle").attr({"class":function(e,i){return t.prefix+"tip_circle "+t.prefix+"tip_circle-"+i},r:function(t,i){return e.radius},cx:function(){return e.radius},cy:function(e,t){return(t+1)*parseInt(d3.select(this).style("font-size"))*1.13+9}}),e.tipGroup.selectAll("."+t.prefix+"tip_text-group").data(l.raw.series).classed(t.prefix+"active",function(e,t){return e.val?!0:!1}),e.tipRect.attr({width:e.tipGroup.node().getBoundingClientRect().width+t.dimensions.tipPadding.left+t.dimensions.tipPadding.right,height:e.tipGroup.node().getBoundingClientRect().height+t.dimensions.tipPadding.top+t.dimensions.tipPadding.bottom}),e.tipBox.attr({transform:function(){if(barPos>t.dimensions.tickWidth()/2)var e=t.rendered.plot.xScaleObj.scale(l.x)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight-d3.select(this).node().getBoundingClientRect().width-t.dimensions.tipOffset.horizontal;else var e=t.rendered.plot.xScaleObj.scale(l.x)+t.dimensions.labelWidth+t.dimensions.yAxisPaddingRight+t.dimensions.tipOffset.horizontal;return"translate("+e+","+t.dimensions.tipOffset.vertical+")"}}),s(e,t)}})}function v(e,t,i,n){var a,r,s,o,d;e.text(function(){var e,l=n;switch(t){case"years":e=l.getFullYear();break;case"months":a=i[l.getMonth()],r=l.getDate(),s=l.getFullYear(),e=a+" "+r+", "+s;break;case"weeks":case"days":a=i[l.getMonth()],r=l.getDate(),s=l.getFullYear(),e=a+" "+r;break;case"hours":r=l.getDate(),o=l.getHours(),d=l.getMinutes();var c,u,p=o>=12?"p.m.":"a.m.";c=0===o?12:o>12?o-12:o,u=0===d?"":10>d?":0"+d:":"+d,e=c+u+" "+p;break;default:e=l}return e})}var y;e.exports=l},function(e,t){function i(e,t){function i(e){return"https://s3.amazonaws.com/"+e.image.bucket+"/"+e.image.base_path+e.id.replace(e.prefix,"")+"/"+e.image.filename+"."+e.image.extension}function n(e){var t="https://www.facebook.com/dialog/share?",n=e.social.facebook.redirect;return t+"app_id="+e.social.facebook.appID+"&amp;display=popup&amp;title="+e.heading+"&amp;description=From%20article"+document.title+"&amp;href="+window.location.href+"&amp;redirect_uri="+n+"&amp;picture="+i(e)}function a(e){var t="mailto:?";return t+"subject="+e.heading+"&amp;body="+e.heading+"%0A"+i(e)+"%0Afrom article: "+document.title+"%0A"+window.location.href}function r(e){var t="sms:";return t+"&body=Check%20out%20this%20chart: "+e.heading+"%20"+i(e)}function s(e){var t="https://twitter.com/intent/tweet?";e.social.twitter.hashtag;return t+"url="+window.location.href+"&amp;via="+e.social.twitter.via+"&amp;text="+encodeURI(e.heading)+"%20"+i(e)+"%20"}function o(e,t,i){var n=screen.width/2-t/2,a=screen.height/2-i/2;window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+t+",height="+i+",top="+a+",left="+n)}var d=[];for(var l in t.social)if(t.social[l]){switch(t.social[l].label){case"Twitter":t.social[l].url=s(t),t.social[l].popup=!0;break;case"Facebook":t.social[l].url=n(t),t.social[l].popup=!0;break;case"Email":t.social[l].url=a(t),t.social[l].popup=!1;break;case"SMS":t.social[l].url=r(t),t.social[l].popup=!1;break;default:console.log("INCORRECT SOCIAL ITEM DEFINITION")}d.push(t.social[l])}var c=d3.select(e),u=c.select(".ct-chart_meta"),p=u.append("div").attr("class","ct-chart_meta_btn gi-social-btn").html("share"),f=c.append("div").attr("class","ct-chart_social"),x=f.append("div").attr("class","ct-chart_social_close").html("&#xd7;"),h=f.append("div").attr("class","ct-chart_social_options");h.append("h3").html("Share this chart:");p.on("click",function(){f.classed("active",!0)}),x.on("click",function(){f.classed("active",!1)});for(var m=d.length,g=0;m>g;g++){h.selectAll(".social-item").data(d).enter().append("div").attr("class","social-item").html(function(e){return e.popup?'<a class="js-gi-share" href="'+e.url+'"><img class="ct-social-icon" src="'+e.icon+'" title="'+e.label+'"/></a>':'<a href="'+e.url+'"><img class="ct-social-icon" src="'+e.icon+'" title="'+e.label+'"/></a>'})}var v=(h.append("div").attr("class","ct-image-url").attr("contentEditable","true").html(function(){var e="https://s3.amazonaws.com/"+t.image.bucket+"/"+t.image.base_path+t.id.replace(t.prefix,"")+"/"+t.image.filename+"."+t.image.extension;return e}),document.querySelectorAll(".js-gi-share"));return v&&[].forEach.call(v,function(e){e.addEventListener("click",function(e){e.preventDefault(),o(this.href,600,620)})}),{meta_nav:u}}e.exports=i},function(e,t){function i(e,t){function i(e,t){var i=d3.csv.parseRows(t);e.append("table").selectAll("tr").data(i).enter().append("tr").selectAll("td").data(function(e){return e}).enter().append("td").text(function(e){return e})}var n=d3.select(e),a=n.append("div").attr("class","ct-chart_meta"),r=a.append("div").attr("class","ct-chart_meta_btn gi-dl-btn").html("data"),s=n.append("div").attr("class","ct-chart_data"),o=s.append("div").attr("class","ct-chart_data_close").html("&#xd7;"),d=s.append("div").attr("class","ct-chart_data_inner"),l=(s.append("h2").html(t.heading),s.append("div").attr("class","ct-chart_data_nav")),c=l.append("a").attr("class","ct-chart_data_btn csv").html("download csv");return i(d,t.data.csv),r.on("click",function(){s.classed("active",!0)}),o.on("click",function(){s.classed("active",!1)}),c.on("click",function(){var e="data:text/plain;charset=utf-8,"+encodeURIComponent(t.data.csv);d3.select(this).attr("href",e).attr("download","data_"+t.id+".csv")}),{meta_nav:a,data_panel:s}}e.exports=i},function(e,t){function i(e,t,i){}e.exports=i}]);